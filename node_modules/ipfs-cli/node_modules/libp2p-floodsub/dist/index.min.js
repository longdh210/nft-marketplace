(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pFloodsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pFloodsub=(()=>{var ya=Object.defineProperty;var Hp=t=>ya(t,"__esModule",{value:!0});var Z=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_e=(t,e)=>{Hp(t);for(var r in e)ya(t,r,{get:e[r],enumerable:!0})};var ma=E((im,ba)=>{var ga="Expected a function",xa=0/0,Gp="[object Symbol]",jp=/^\s+|\s+$/g,Wp=/^[-+]0x[0-9a-f]+$/i,$p=/^0b[01]+$/i,Yp=/^0o[0-7]+$/i,Qp=parseInt,Zp=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Xp=typeof self=="object"&&self&&self.Object===Object&&self,Jp=Zp||Xp||Function("return this")(),ed=Object.prototype,td=ed.toString,rd=Math.max,nd=Math.min,ls=function(){return Jp.Date.now()};function id(t,e,r){var n,i,s,o,a,u,c=0,f=!1,h=!1,l=!0;if(typeof t!="function")throw new TypeError(ga);e=va(e)||0,$n(r)&&(f=!!r.leading,h="maxWait"in r,s=h?rd(va(r.maxWait)||0,e):s,l="trailing"in r?!!r.trailing:l);function d(C){var O=n,q=i;return n=i=void 0,c=C,o=t.apply(q,O),o}function p(C){return c=C,a=setTimeout(b,e),f?d(C):o}function y(C){var O=C-u,q=C-c,ce=e-O;return h?nd(ce,s-q):ce}function x(C){var O=C-u,q=C-c;return u===void 0||O>=e||O<0||h&&q>=s}function b(){var C=ls();if(x(C))return S(C);a=setTimeout(b,y(C))}function S(C){return a=void 0,l&&n?d(C):(n=i=void 0,o)}function A(){a!==void 0&&clearTimeout(a),c=0,n=u=i=a=void 0}function L(){return a===void 0?o:S(ls())}function T(){var C=ls(),O=x(C);if(n=arguments,i=this,u=C,O){if(a===void 0)return p(u);if(h)return a=setTimeout(b,e),d(u)}return a===void 0&&(a=setTimeout(b,e)),o}return T.cancel=A,T.flush=L,T}function sd(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(ga);return $n(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),id(t,e,{leading:n,maxWait:e,trailing:i})}function $n(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function od(t){return!!t&&typeof t=="object"}function ad(t){return typeof t=="symbol"||od(t)&&td.call(t)==Gp}function va(t){if(typeof t=="number")return t;if(ad(t))return xa;if($n(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$n(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jp,"");var r=$p.test(t);return r||Yp.test(t)?Qp(t.slice(2),r?2:8):Wp.test(t)?xa:+t}ba.exports=sd});var Sa=E((wa,Ea)=>{"use strict";var ud=ma();wa=Ea.exports=ps;function ps(t){if(!(this instanceof ps))return new ps(t);t=t||{};let e=t.validity||30,r=new Map,n=ud(()=>{r.forEach((i,s)=>{let o=i.validity||e;cd(i.timestamp)>o&&r.delete(s)})},200);this.put=(i,s,o)=>{this.has(i)||r.set(i,{value:s,timestamp:new Date,validity:o}),n()},this.get=i=>{if(r.has(i))return r.get(i).value;throw new Error("key does not exist")},this.has=i=>r.has(i)}function cd(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});function fd(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,x=0,b=0,S=p.length;b!==S&&p[b]===0;)b++,y++;for(var A=(S-b)*f+1>>>0,L=new Uint8Array(A);b!==S;){for(var T=p[b],C=0,O=A-1;(T!==0||C<x)&&O!==-1;O--,C++)T+=256*L[O]>>>0,L[O]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");x=C,b++}for(var q=A-x;q!==A&&L[q]===0;)q++;for(var ce=u.repeat(y);q<A;++q)ce+=t.charAt(L[q]);return ce}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var x=0,b=0;p[y]===u;)x++,y++;for(var S=(p.length-y)*c+1>>>0,A=new Uint8Array(S);p[y];){var L=r[p.charCodeAt(y)];if(L===255)return;for(var T=0,C=S-1;(L!==0||T<b)&&C!==-1;C--,T++)L+=a*A[C]>>>0,A[C]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");b=T,y++}if(p[y]!==" "){for(var O=S-b;O!==S&&A[O]===0;)O++;for(var q=new Uint8Array(x+(S-O)),ce=x;O!==S;)q[ce++]=A[O++];return q}}}function d(p){var y=l(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var hd,ld,Ba,_a=Z(()=>{hd=fd,ld=hd,Ba=ld});var om,Ca,It,Aa,Ia,Ft=Z(()=>{om=new Uint8Array(0),Ca=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},It=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Aa=t=>new TextEncoder().encode(t),Ia=t=>new TextDecoder().decode(t)});var Ra,Pa,Da,Na,La,Yn,Ut,pd,dd,fe,ot=Z(()=>{_a();Ft();Ra=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Pa=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return Na(this,e)}},Da=class{constructor(e){this.decoders=e}or(e){return Na(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Na=(t,e)=>new Da({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),La=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ra(e,r,n),this.decoder=new Pa(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Yn=({name:t,prefix:e,encode:r,decode:n})=>new La(t,e,r,n),Ut=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Ba(r,e);return Yn({prefix:t,name:e,encode:n,decode:s=>It(i(s))})},pd=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},dd=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},fe=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Yn({prefix:e,name:t,encode(i){return dd(i,n,r)},decode(i){return pd(i,n,r,t)}})});var ds={};_e(ds,{identity:()=>yd});var yd,ka=Z(()=>{ot();Ft();yd=Yn({prefix:"\0",name:"identity",encode:t=>Ia(t),decode:t=>Aa(t)})});var ys={};_e(ys,{base2:()=>gd});var gd,Oa=Z(()=>{ot();gd=fe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var gs={};_e(gs,{base8:()=>xd});var xd,Ka=Z(()=>{ot();xd=fe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var xs={};_e(xs,{base10:()=>vd});var vd,Fa=Z(()=>{ot();vd=Ut({prefix:"9",name:"base10",alphabet:"0123456789"})});var Qn={};_e(Qn,{base16:()=>bd,base16upper:()=>md});var bd,md,vs=Z(()=>{ot();bd=fe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),md=fe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var un={};_e(un,{base32:()=>_r,base32hex:()=>Bd,base32hexpad:()=>Cd,base32hexpadupper:()=>Ad,base32hexupper:()=>_d,base32pad:()=>Ed,base32padupper:()=>Sd,base32upper:()=>wd,base32z:()=>Id});var _r,wd,Ed,Sd,Bd,_d,Cd,Ad,Id,cn=Z(()=>{ot();_r=fe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wd=fe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ed=fe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sd=fe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bd=fe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_d=fe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cd=fe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ad=fe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Id=fe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Zn={};_e(Zn,{base36:()=>Td,base36upper:()=>Rd});var Td,Rd,bs=Z(()=>{ot();Td=Ut({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rd=Ut({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Cr={};_e(Cr,{base58btc:()=>at,base58flickr:()=>Pd});var at,Pd,Ar=Z(()=>{ot();at=Ut({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pd=Ut({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Ir={};_e(Ir,{base64:()=>Dd,base64pad:()=>Nd,base64url:()=>Ld,base64urlpad:()=>kd});var Dd,Nd,Ld,kd,fn=Z(()=>{ot();Dd=fe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nd=fe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ld=fe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kd=fe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function qa(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ud;)e[r++]=t&255|Ua,t/=128;for(;t&Fd;)e[r++]=t&255|Ua,t>>>=7;return e[r]=t|0,qa.bytes=r-n+1,e}function ms(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw ms.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&Ma)<<n:(s&Ma)*Math.pow(2,n),n+=7}while(s>=Md);return ms.bytes=i-e,r}var Od,Ua,Kd,Fd,Ud,qd,Md,Ma,Vd,zd,Hd,Gd,jd,Wd,$d,Yd,Qd,Zd,Xd,Jd,hn,Va=Z(()=>{Od=qa,Ua=128,Kd=127,Fd=~Kd,Ud=Math.pow(2,31);qd=ms,Md=128,Ma=127;Vd=Math.pow(2,7),zd=Math.pow(2,14),Hd=Math.pow(2,21),Gd=Math.pow(2,28),jd=Math.pow(2,35),Wd=Math.pow(2,42),$d=Math.pow(2,49),Yd=Math.pow(2,56),Qd=Math.pow(2,63),Zd=function(t){return t<Vd?1:t<zd?2:t<Hd?3:t<Gd?4:t<jd?5:t<Wd?6:t<$d?7:t<Yd?8:t<Qd?9:10},Xd={encode:Od,decode:qd,encodingLength:Zd},Jd=Xd,hn=Jd});var ln,Tr,Rr,Xn=Z(()=>{Va();ln=t=>[hn.decode(t),hn.decode.bytes],Tr=(t,e,r=0)=>(hn.encode(t,e,r),e),Rr=t=>hn.encodingLength(t)});var Jn={};_e(Jn,{Digest:()=>Pr,create:()=>pn,decode:()=>ws,equals:()=>Es});var pn,ws,Es,Pr,dn=Z(()=>{Ft();Xn();pn=(t,e)=>{let r=e.byteLength,n=Rr(t),i=n+Rr(r),s=new Uint8Array(i+r);return Tr(t,s,0),Tr(r,s,n),s.set(e,i),new Pr(t,r,e,s)},ws=t=>{let e=It(t),[r,n]=ln(e),[i,s]=ln(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Pr(r,i,o,e)},Es=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Ca(t.bytes,e.bytes),Pr=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var yn,Ha,ei=Z(()=>{dn();yn=({name:t,code:e,encode:r})=>new Ha(t,e,r),Ha=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return pn(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var qt={};_e(qt,{sha256:()=>ey,sha512:()=>ty});var ja,ey,ty,or=Z(()=>{ei();ja=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),ey=yn({name:"sha2-256",code:18,encode:ja("SHA-256")}),ty=yn({name:"sha2-512",code:19,encode:ja("SHA-512")})});var gn={};_e(gn,{identity:()=>ry});var ry,ti=Z(()=>{ei();Ft();ry=yn({name:"identity",code:0,encode:t=>It(t)})});var Wa=Z(()=>{Ft()});var Tm,Rm,$a=Z(()=>{Tm=new TextEncoder,Rm=new TextDecoder});var Za={};_e(Za,{CID:()=>xe});var xe,sy,oy,ay,xn,uy,Ya,Qa,ri,ni,cy,fy,hy,Ss=Z(()=>{Xn();dn();Ar();cn();Ft();xe=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ni,byteLength:ni,code:ri,version:ri,multihash:ri,bytes:ri,_baseCache:ni,asCID:ni})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==xn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==uy)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return xe.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=pn(e,r);return xe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Es(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return oy(r,i,e||at.encoder);default:return ay(r,i,e||_r.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return fy(/^0\.0/,hy),!!(e&&(e[Qa]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof xe)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new xe(r,n,i,s||Ya(r,n,i.bytes))}else if(e!=null&&e[Qa]===!0){let{version:r,multihash:n,code:i}=e,s=ws(n);return xe.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==xn)throw new Error(`Version 0 CID must use dag-pb (code: ${xn}) block encoding`);return new xe(e,r,n,n.bytes)}case 1:{let i=Ya(e,r,n.bytes);return new xe(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return xe.create(0,xn,e)}static createV1(e,r){return xe.create(1,e,r)}static decode(e){let[r,n]=xe.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=xe.inspectBytes(e),n=r.size-r.multihashSize,i=It(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Pr(r.multihashCode,r.digestSize,s,i);return[r.version===0?xe.createV0(o):xe.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,l]=ln(e.subarray(r));return r+=l,h},i=n(),s=xn;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(e,r){let[n,i]=sy(e,r),s=xe.decode(i);return s._baseCache.set(n,e),s}},sy=(t,e)=>{switch(t[0]){case"Q":{let r=e||at;return[at.prefix,r.decode(`${at.prefix}${t}`)]}case at.prefix:{let r=e||at;return[at.prefix,r.decode(t)]}case _r.prefix:{let r=e||_r;return[_r.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},oy=(t,e,r)=>{let{prefix:n}=r;if(n!==at.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},ay=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},xn=112,uy=18,Ya=(t,e,r)=>{let n=Rr(t),i=n+Rr(e),s=new Uint8Array(i+r.byteLength);return Tr(t,s,0),Tr(e,s,n),s.set(r,i),s},Qa=Symbol.for("@ipld/js-cid/CID"),ri={writable:!1,configurable:!1,enumerable:!0},ni={writable:!1,enumerable:!1,configurable:!1},cy="0.0.0-dev",fy=(t,e)=>{if(t.test(cy))console.warn(e);else throw new Error(e)},hy=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Xa=Z(()=>{Ss();Xn();Ft();ei();dn()});var Bs,Um,Ja=Z(()=>{ka();Oa();Ka();Fa();vs();cn();bs();Ar();fn();or();ti();Wa();$a();Xa();Bs={...ds,...ys,...gs,...xs,...Qn,...un,...Zn,...Cr,...Ir},Um={...qt,...gn}});function e0(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var t0,_s,ly,ii,Cs=Z(()=>{Ja();t0=e0("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),_s=e0("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ly={utf8:t0,"utf-8":t0,hex:Bs.base16,latin1:_s,ascii:_s,binary:_s,...Bs},ii=ly});var ut={};_e(ut,{toString:()=>py});function py(t,e="utf8"){let r=ii[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var ct=Z(()=>{Cs()});var n0=E((Hm,r0)=>{var Dr=1e3,Nr=Dr*60,Lr=Nr*60,ar=Lr*24,dy=ar*7,yy=ar*365.25;r0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return gy(t);if(r==="number"&&isFinite(t))return e.long?vy(t):xy(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function gy(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yy;case"weeks":case"week":case"w":return r*dy;case"days":case"day":case"d":return r*ar;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Lr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Nr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Dr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xy(t){var e=Math.abs(t);return e>=ar?Math.round(t/ar)+"d":e>=Lr?Math.round(t/Lr)+"h":e>=Nr?Math.round(t/Nr)+"m":e>=Dr?Math.round(t/Dr)+"s":t+"ms"}function vy(t){var e=Math.abs(t);return e>=ar?si(t,e,ar,"day"):e>=Lr?si(t,e,Lr,"hour"):e>=Nr?si(t,e,Nr,"minute"):e>=Dr?si(t,e,Dr,"second"):t+" ms"}function si(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var s0=E((Gm,i0)=>{function by(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=n0(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let h=0;for(let l=0;l<f.length;l++)h=(h<<5)-h+f.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(f){let h,l=null,d,p;function y(...x){if(!y.enabled)return;let b=y,S=Number(new Date),A=S-(h||S);b.diff=A,b.prev=h,b.curr=S,h=S,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let L=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(C,O)=>{if(C==="%%")return"%";L++;let q=r.formatters[O];if(typeof q=="function"){let ce=x[L];C=q.call(b,ce),x.splice(L,1),L--}return C}),r.formatArgs.call(b,x),(b.log||r.log).apply(b,x)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:x=>{l=x}}),typeof r.init=="function"&&r.init(y),y}function n(f,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+f);return l.log=this.log,l}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,l=(typeof f=="string"?f:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(f=l[h].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(f))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}i0.exports=by});var vn=E((Me,oi)=>{Me.formatArgs=wy;Me.save=Ey;Me.load=Sy;Me.useColors=my;Me.storage=By();Me.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Me.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function my(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wy(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+oi.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Me.log=console.debug||console.log||(()=>{});function Ey(t){try{t?Me.storage.setItem("debug",t):Me.storage.removeItem("debug")}catch(e){}}function Sy(){let t;try{t=Me.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function By(){try{return localStorage}catch(t){}}oi.exports=s0()(Me);var{formatters:_y}=oi.exports;_y.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Is=E((jm,As)=>{"use strict";var kr=typeof Reflect=="object"?Reflect:null,o0=kr&&typeof kr.apply=="function"?kr.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ai;kr&&typeof kr.ownKeys=="function"?ai=kr.ownKeys:Object.getOwnPropertySymbols?ai=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ai=function(e){return Object.getOwnPropertyNames(e)};function Cy(t){console&&console.warn&&console.warn(t)}var a0=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}As.exports=X;As.exports.once=Ry;X.EventEmitter=X;X.prototype._events=void 0;X.prototype._eventsCount=0;X.prototype._maxListeners=void 0;var u0=10;function ui(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return u0},set:function(t){if(typeof t!="number"||t<0||a0(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u0=t}});X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||a0(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function c0(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return c0(this)};X.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")o0(u,this,r);else for(var c=u.length,f=d0(u,c),n=0;n<c;++n)o0(f[n],this,r);return!0};function f0(t,e,r,n){var i,s,o;if(ui(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=c0(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Cy(a)}return t}X.prototype.addListener=function(e,r){return f0(this,e,r,!1)};X.prototype.on=X.prototype.addListener;X.prototype.prependListener=function(e,r){return f0(this,e,r,!0)};function Ay(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h0(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Ay.bind(n);return i.listener=r,n.wrapFn=i,i}X.prototype.once=function(e,r){return ui(r),this.on(e,h0(this,e,r)),this};X.prototype.prependOnceListener=function(e,r){return ui(r),this.prependListener(e,h0(this,e,r)),this};X.prototype.removeListener=function(e,r){var n,i,s,o,a;if(ui(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Iy(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};X.prototype.off=X.prototype.removeListener;X.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function l0(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Ty(i):d0(i,i.length)}X.prototype.listeners=function(e){return l0(this,e,!0)};X.prototype.rawListeners=function(e){return l0(this,e,!1)};X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):p0.call(t,e)};X.prototype.listenerCount=p0;function p0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?ai(this._events):[]};function d0(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Iy(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ty(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Ry(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}y0(t,e,s,{once:!0}),e!=="error"&&Py(t,i,{once:!0})})}function Py(t,e,r){typeof t.on=="function"&&y0(t,"error",e,r)}function y0(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Je=E((Wm,x0)=>{"use strict";function g0(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Dy(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return g0(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),g0(new i,r)}}x0.exports=Dy});var Rs=E(($m,Or)=>{var v0=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},Ts=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),ci=t=>t&&typeof t.sink=="function"&&Ts(t.source),Ny=t=>e=>(t.sink(e),t.source),b0=(...t)=>{if(ci(t[0])){let e=t[0];t[0]=()=>e.source}else if(Ts(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&ci(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)ci(t[e])&&(t[e]=Ny(t[e]));return v0(...t)};Or.exports=b0;Or.exports.pipe=b0;Or.exports.rawPipe=v0;Or.exports.isIterable=Ts;Or.exports.isDuplex=ci});var w0=E((Ym,Ps)=>{"use strict";var Ly=Object.prototype.hasOwnProperty,Pe="~";function bn(){}Object.create&&(bn.prototype=Object.create(null),new bn().__proto__||(Pe=!1));function ky(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function m0(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new ky(r,n||t,i),o=Pe?Pe+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function fi(t,e){--t._eventsCount==0?t._events=new bn:delete t._events[e]}function Ce(){this._events=new bn,this._eventsCount=0}Ce.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Ly.call(r,n)&&e.push(Pe?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Ce.prototype.listeners=function(e){var r=Pe?Pe+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Ce.prototype.listenerCount=function(e){var r=Pe?Pe+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Ce.prototype.emit=function(e,r,n,i,s,o){var a=Pe?Pe+e:e;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,h;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(h=1,f=new Array(c-1);h<c;h++)f[h-1]=arguments[h];u.fn.apply(u.context,f)}else{var l=u.length,d;for(h=0;h<l;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,r);break;case 3:u[h].fn.call(u[h].context,r,n);break;case 4:u[h].fn.call(u[h].context,r,n,i);break;default:if(!f)for(d=1,f=new Array(c-1);d<c;d++)f[d-1]=arguments[d];u[h].fn.apply(u[h].context,f)}}return!0};Ce.prototype.on=function(e,r,n){return m0(this,e,r,n,!1)};Ce.prototype.once=function(e,r,n){return m0(this,e,r,n,!0)};Ce.prototype.removeListener=function(e,r,n,i){var s=Pe?Pe+e:e;if(!this._events[s])return this;if(!r)return fi(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&fi(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:fi(this,s)}return this};Ce.prototype.removeAllListeners=function(e){var r;return e?(r=Pe?Pe+e:e,this._events[r]&&fi(this,r)):(this._events=new bn,this._eventsCount=0),this};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.addListener=Ce.prototype.on;Ce.prefixed=Pe;Ce.EventEmitter=Ce;typeof Ps!="undefined"&&(Ps.exports=Ce)});var S0=E((Qm,E0)=>{"use strict";E0.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var _0=E((Zm,hi)=>{"use strict";var Oy=S0(),Ds=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},B0=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let o=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new Ds(o);typeof t.cancel=="function"&&t.cancel(),i(a)},e);Oy(t.then(n,i),()=>{clearTimeout(s)})});hi.exports=B0;hi.exports.default=B0;hi.exports.TimeoutError=Ds});var C0=E(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});function Ky(t,e,r){let n=0,i=t.length;for(;i>0;){let s=i/2|0,o=n+s;r(t[o],e)<=0?(n=++o,i-=s+1):i=s}return n}Ns.default=Ky});var I0=E(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var Fy=C0(),A0=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=Fy.default(this._queue,n,(s,o)=>o.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Ls.default=A0});var P0=E(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var Uy=w0(),T0=_0(),qy=I0(),li=()=>{},My=new T0.TimeoutError,R0=class extends Uy{constructor(e){var r,n,i,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=li,this._resolveIdle=li,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:qy.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=li,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=li,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():T0.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(My)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};ks.default=R0});var O0=E((tw,k0)=>{"use strict";var D0=()=>{},N0=Symbol.for("@libp2p/js-interfaces/topology"),L0=class{constructor({min:e=0,max:r=1/0,handlers:n={}}){this.min=e,this.max=r,this._onConnect=n.onConnect||D0,this._onDisconnect=n.onDisconnect||D0,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[N0](){return!0}static isTopology(e){return Boolean(e&&e[N0])}async setRegistrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};k0.exports=L0});var V0=E((rw,M0)=>{"use strict";var Vy=O0(),K0=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),F0=vn(),U0=Object.assign(F0("libp2p:topology:multicodec-topology"),{error:F0("libp2p:topology:multicodec-topology:error")}),q0=class extends Vy{constructor({min:e,max:r,multicodecs:n,handlers:i}){super({min:e,max:r,handlers:i});if(!n)throw new Error("one or more multicodec should be provided");if(!i)throw new Error("the handlers should be provided");if(typeof i.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof i.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(n)?n:[n],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[K0](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[K0])}async setRegistrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(e){for await(let{id:r,protocols:n}of e)if(this.multicodecs.filter(i=>n.includes(i)).length){this.peers.add(r.toB58String());let i=this._registrar.getConnection(r);i&&this._onConnect(r,i)}else this.peers.delete(r.toB58String())}async _onProtocolChange({peerId:e,protocols:r}){try{let n=this.peers.has(e.toB58String()),i=r.filter(s=>this.multicodecs.includes(s));n&&i.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let o=await this._registrar.peerStore.get(e);await this._updatePeers([o]);return}}catch(n){U0.error(n)}}async _onPeerConnect(e){try{let r=e.remotePeer,n=await this._registrar.peerStore.protoBook.get(r);if(!n)return;this.multicodecs.find(i=>n.includes(i))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}catch(r){U0.error(r)}}};M0.exports=q0});var H0=E(z0=>{"use strict";z0.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var j0=E((iw,G0)=>{"use strict";G0.exports=zy;function zy(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];a.apply(null,h)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,u(c))}})}});var Q0=E(Y0=>{"use strict";var pi=Y0;pi.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Kr=new Array(64),W0=new Array(123);for(et=0;et<64;)W0[Kr[et]=et<26?et+65:et<52?et+71:et<62?et-4:et-59|43]=et++;var et;pi.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=e[r++];switch(a){case 0:s[o++]=Kr[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=Kr[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=Kr[u|c>>6],s[o++]=Kr[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Kr[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var $0="invalid encoding";pi.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&s>1)break;if((u=W0[u])===void 0)throw Error($0);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error($0);return n-i};pi.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var X0=E((ow,Z0)=>{"use strict";Z0.exports=di;function di(){this._listeners={}}di.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};di.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};di.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var su=E((aw,iu)=>{"use strict";iu.exports=J0(J0);function J0(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){e[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,eu),t.writeFloatBE=e.bind(null,tu);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,ru),t.readFloatBE=r.bind(null,nu)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){e[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),f=o*Math.pow(2,-h),n(f*4503599627370496>>>0,a,u+i),n((c<<31|h+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}t.writeDoubleLE=e.bind(null,eu,0,4),t.writeDoubleBE=e.bind(null,tu,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,h=c>>>20&2047,l=4294967296*(c&1048575)+u;return h===2047?l?NaN:f*(1/0):h===0?f*5e-324*l:f*Math.pow(2,h-1075)*(l+4503599627370496)}t.readDoubleLE=r.bind(null,ru,0,4),t.readDoubleBE=r.bind(null,nu,4,0)}(),t}function eu(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function tu(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function ru(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function nu(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var ou=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var uu=E(au=>{"use strict";var Os=au;Os.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(e.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};Os.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=e[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Os.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var fu=E((cw,cu)=>{"use strict";cu.exports=Hy;function Hy(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return t(u);o+u>n&&(s=t(n),o=0);var c=e.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var lu=E((fw,hu)=>{"use strict";hu.exports=me;var mn=Vt();function me(t,e){this.lo=t>>>0,this.hi=e>>>0}var ur=me.zero=new me(0,0);ur.toNumber=function(){return 0};ur.zzEncode=ur.zzDecode=function(){return this};ur.length=function(){return 1};var Gy=me.zeroHash="\0\0\0\0\0\0\0\0";me.fromNumber=function(e){if(e===0)return ur;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new me(n,i)};me.from=function(e){if(typeof e=="number")return me.fromNumber(e);if(mn.isString(e))if(mn.Long)e=mn.Long.fromString(e);else return me.fromNumber(parseInt(e,10));return e.low||e.high?new me(e.low>>>0,e.high>>>0):ur};me.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};me.prototype.toLong=function(e){return mn.Long?new mn.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Mt=String.prototype.charCodeAt;me.fromHash=function(e){return e===Gy?ur:new me((Mt.call(e,0)|Mt.call(e,1)<<8|Mt.call(e,2)<<16|Mt.call(e,3)<<24)>>>0,(Mt.call(e,4)|Mt.call(e,5)<<8|Mt.call(e,6)<<16|Mt.call(e,7)<<24)>>>0)};me.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};me.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};me.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};me.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Vt=E(Ks=>{"use strict";var N=Ks;N.asPromise=j0();N.base64=Q0();N.EventEmitter=X0();N.float=su();N.inquire=ou();N.utf8=uu();N.pool=fu();N.LongBits=lu();N.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);N.global=N.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||Ks;N.emptyArray=Object.freeze?Object.freeze([]):[];N.emptyObject=Object.freeze?Object.freeze({}):{};N.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};N.isString=function(e){return typeof e=="string"||e instanceof String};N.isObject=function(e){return e&&typeof e=="object"};N.isset=N.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};N.Buffer=function(){try{var t=N.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();N._Buffer_from=null;N._Buffer_allocUnsafe=null;N.newBuffer=function(e){return typeof e=="number"?N.Buffer?N._Buffer_allocUnsafe(e):new N.Array(e):N.Buffer?N._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};N.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;N.Long=N.global.dcodeIO&&N.global.dcodeIO.Long||N.global.Long||N.inquire("long");N.key2Re=/^true|false|0|1$/;N.key32Re=/^-?(?:0|[1-9][0-9]*)$/;N.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;N.longToHash=function(e){return e?N.LongBits.from(e).toHash():N.LongBits.zeroHash};N.longFromHash=function(e,r){var n=N.LongBits.fromHash(e);return N.Long?N.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function pu(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}N.merge=pu;N.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function du(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&pu(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}N.newError=du;N.ProtocolError=du("ProtocolError");N.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};N.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};N.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};N._configure=function(){var t=N.Buffer;if(!t){N._Buffer_from=N._Buffer_allocUnsafe=null;return}N._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},N._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Hs=E((lw,vu)=>{"use strict";vu.exports=j;var ze=Vt(),Fs,yi=ze.LongBits,yu=ze.base64,gu=ze.utf8;function wn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Us(){}function jy(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function j(){this.len=0,this.head=new wn(Us,0,0),this.tail=this.head,this.states=null}var xu=function(){return ze.Buffer?function(){return(j.create=function(){return new Fs})()}:function(){return new j}};j.create=xu();j.alloc=function(e){return new ze.Array(e)};ze.Array!==Array&&(j.alloc=ze.pool(j.alloc,ze.Array.prototype.subarray));j.prototype._push=function(e,r,n){return this.tail=this.tail.next=new wn(e,r,n),this.len+=r,this};function qs(t,e,r){e[r]=t&255}function Wy(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Ms(t,e){this.len=t,this.next=void 0,this.val=e}Ms.prototype=Object.create(wn.prototype);Ms.prototype.fn=Wy;j.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Ms((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};j.prototype.int32=function(e){return e<0?this._push(Vs,10,yi.fromNumber(e)):this.uint32(e)};j.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Vs(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}j.prototype.uint64=function(e){var r=yi.from(e);return this._push(Vs,r.length(),r)};j.prototype.int64=j.prototype.uint64;j.prototype.sint64=function(e){var r=yi.from(e).zzEncode();return this._push(Vs,r.length(),r)};j.prototype.bool=function(e){return this._push(qs,1,e?1:0)};function zs(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}j.prototype.fixed32=function(e){return this._push(zs,4,e>>>0)};j.prototype.sfixed32=j.prototype.fixed32;j.prototype.fixed64=function(e){var r=yi.from(e);return this._push(zs,4,r.lo)._push(zs,4,r.hi)};j.prototype.sfixed64=j.prototype.fixed64;j.prototype.float=function(e){return this._push(ze.float.writeFloatLE,4,e)};j.prototype.double=function(e){return this._push(ze.float.writeDoubleLE,8,e)};var $y=ze.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};j.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(qs,1,0);if(ze.isString(e)){var n=j.alloc(r=yu.length(e));yu.decode(e,n,0),e=n}return this.uint32(r)._push($y,r,e)};j.prototype.string=function(e){var r=gu.length(e);return r?this.uint32(r)._push(gu.write,r,e):this._push(qs,1,0)};j.prototype.fork=function(){return this.states=new jy(this),this.head=this.tail=new wn(Us,0,0),this.len=0,this};j.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new wn(Us,0,0),this.len=0),this};j.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};j.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};j._configure=function(t){Fs=t,j.create=xu(),Fs._configure()}});var wu=E((pw,mu)=>{"use strict";mu.exports=ft;var bu=Hs();(ft.prototype=Object.create(bu.prototype)).constructor=ft;var zt=Vt();function ft(){bu.call(this)}ft._configure=function(){ft.alloc=zt._Buffer_allocUnsafe,ft.writeBytesBuffer=zt.Buffer&&zt.Buffer.prototype instanceof Uint8Array&&zt.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};ft.prototype.bytes=function(e){zt.isString(e)&&(e=zt._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(ft.writeBytesBuffer,r,e),this};function Yy(t,e,r){t.length<40?zt.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}ft.prototype.string=function(e){var r=zt.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Yy,r,e),this};ft._configure()});var Ws=E((dw,Cu)=>{"use strict";Cu.exports=le;var ht=Vt(),Gs,Eu=ht.LongBits,Qy=ht.utf8;function tt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function le(t){this.buf=t,this.pos=0,this.len=t.length}var Su=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new le(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new le(e);throw Error("illegal buffer")},Bu=function(){return ht.Buffer?function(r){return(le.create=function(i){return ht.Buffer.isBuffer(i)?new Gs(i):Su(i)})(r)}:Su};le.create=Bu();le.prototype._slice=ht.Array.prototype.subarray||ht.Array.prototype.slice;le.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,tt(this,10);return e}}();le.prototype.int32=function(){return this.uint32()|0};le.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function js(){var t=new Eu(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw tt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw tt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}le.prototype.bool=function(){return this.uint32()!==0};function gi(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}le.prototype.fixed32=function(){if(this.pos+4>this.len)throw tt(this,4);return gi(this.buf,this.pos+=4)};le.prototype.sfixed32=function(){if(this.pos+4>this.len)throw tt(this,4);return gi(this.buf,this.pos+=4)|0};function _u(){if(this.pos+8>this.len)throw tt(this,8);return new Eu(gi(this.buf,this.pos+=4),gi(this.buf,this.pos+=4))}le.prototype.float=function(){if(this.pos+4>this.len)throw tt(this,4);var e=ht.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};le.prototype.double=function(){if(this.pos+8>this.len)throw tt(this,4);var e=ht.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};le.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw tt(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};le.prototype.string=function(){var e=this.bytes();return Qy.read(e,0,e.length)};le.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw tt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw tt(this);while(this.buf[this.pos++]&128);return this};le.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};le._configure=function(t){Gs=t,le.create=Bu(),Gs._configure();var e=ht.Long?"toLong":"toNumber";ht.merge(le.prototype,{int64:function(){return js.call(this)[e](!1)},uint64:function(){return js.call(this)[e](!0)},sint64:function(){return js.call(this).zzDecode()[e](!1)},fixed64:function(){return _u.call(this)[e](!0)},sfixed64:function(){return _u.call(this)[e](!1)}})}});var Ru=E((yw,Tu)=>{"use strict";Tu.exports=cr;var Au=Ws();(cr.prototype=Object.create(Au.prototype)).constructor=cr;var Iu=Vt();function cr(t){Au.call(this,t)}cr._configure=function(){Iu.Buffer&&(cr.prototype._slice=Iu.Buffer.prototype.slice)};cr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};cr._configure()});var Du=E((gw,Pu)=>{"use strict";Pu.exports=En;var $s=Vt();(En.prototype=Object.create($s.EventEmitter.prototype)).constructor=En;function En(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");$s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}En.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return $s.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return o.emit("error",u,e),s(u);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};En.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Lu=E(Nu=>{"use strict";var Zy=Nu;Zy.Service=Du()});var Ou=E((vw,ku)=>{"use strict";ku.exports={}});var Uu=E(Fu=>{"use strict";var Oe=Fu;Oe.build="minimal";Oe.Writer=Hs();Oe.BufferWriter=wu();Oe.Reader=Ws();Oe.BufferReader=Ru();Oe.util=Vt();Oe.rpc=Lu();Oe.roots=Ou();Oe.configure=Ku;function Ku(){Oe.util._configure(),Oe.Writer._configure(Oe.BufferWriter),Oe.Reader._configure(Oe.BufferReader)}Ku()});var xi=E((mw,qu)=>{"use strict";qu.exports=Uu()});var Qs=E((ww,Mu)=>{"use strict";var Ht=xi(),Fr=Ht.Reader,Ys=Ht.Writer,M=Ht.util,ve=Ht.roots["libp2p-pubsub-rpc"]||(Ht.roots["libp2p-pubsub-rpc"]={});ve.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.subscriptions=M.emptyArray,t.prototype.msgs=M.emptyArray,t.encode=function(r,n){if(n||(n=Ys.create()),r.subscriptions!=null&&r.subscriptions.length)for(var i=0;i<r.subscriptions.length;++i)ve.RPC.SubOpts.encode(r.subscriptions[i],n.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var i=0;i<r.msgs.length;++i)ve.RPC.Message.encode(r.msgs[i],n.uint32(18).fork()).ldelim();return n},t.decode=function(r,n){r instanceof Fr||(r=Fr.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new ve.RPC;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(ve.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(ve.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof ve.RPC)return r;var n=new ve.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");n.subscriptions=[];for(var i=0;i<r.subscriptions.length;++i){if(typeof r.subscriptions[i]!="object")throw TypeError(".RPC.subscriptions: object expected");n.subscriptions[i]=ve.RPC.SubOpts.fromObject(r.subscriptions[i])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");n.msgs=[];for(var i=0;i<r.msgs.length;++i){if(typeof r.msgs[i]!="object")throw TypeError(".RPC.msgs: object expected");n.msgs[i]=ve.RPC.Message.fromObject(r.msgs[i])}}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.subscriptions=[],i.msgs=[]),r.subscriptions&&r.subscriptions.length){i.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)i.subscriptions[s]=ve.RPC.SubOpts.toObject(r.subscriptions[s],n)}if(r.msgs&&r.msgs.length){i.msgs=[];for(var s=0;s<r.msgs.length;++s)i.msgs[s]=ve.RPC.Message.toObject(r.msgs[s],n)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ht.util.toJSONOptions)},t.SubOpts=function(){function e(n){if(n)for(var i=Object.keys(n),s=0;s<i.length;++s)n[i[s]]!=null&&(this[i[s]]=n[i[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:M.oneOfGetter(r=["subscribe"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:M.oneOfGetter(r=["topicID"]),set:M.oneOfSetter(r)}),e.encode=function(i,s){return s||(s=Ys.create()),i.subscribe!=null&&Object.hasOwnProperty.call(i,"subscribe")&&s.uint32(8).bool(i.subscribe),i.topicID!=null&&Object.hasOwnProperty.call(i,"topicID")&&s.uint32(18).string(i.topicID),s},e.decode=function(i,s){i instanceof Fr||(i=Fr.create(i));for(var o=s===void 0?i.len:i.pos+s,a=new ve.RPC.SubOpts;i.pos<o;){var u=i.uint32();switch(u>>>3){case 1:a.subscribe=i.bool();break;case 2:a.topicID=i.string();break;default:i.skipType(u&7);break}}return a},e.fromObject=function(i){if(i instanceof ve.RPC.SubOpts)return i;var s=new ve.RPC.SubOpts;return i.subscribe!=null&&(s.subscribe=Boolean(i.subscribe)),i.topicID!=null&&(s.topicID=String(i.topicID)),s},e.toObject=function(i,s){s||(s={});var o={};return i.subscribe!=null&&i.hasOwnProperty("subscribe")&&(o.subscribe=i.subscribe,s.oneofs&&(o._subscribe="subscribe")),i.topicID!=null&&i.hasOwnProperty("topicID")&&(o.topicID=i.topicID,s.oneofs&&(o._topicID="topicID")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ht.util.toJSONOptions)},e}(),t.Message=function(){function e(n){if(this.topicIDs=[],n)for(var i=Object.keys(n),s=0;s<i.length;++s)n[i[s]]!=null&&(this[i[s]]=n[i[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=M.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:M.oneOfGetter(r=["from"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:M.oneOfGetter(r=["data"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:M.oneOfGetter(r=["seqno"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:M.oneOfGetter(r=["signature"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:M.oneOfGetter(r=["key"]),set:M.oneOfSetter(r)}),e.encode=function(i,s){if(s||(s=Ys.create()),i.from!=null&&Object.hasOwnProperty.call(i,"from")&&s.uint32(10).bytes(i.from),i.data!=null&&Object.hasOwnProperty.call(i,"data")&&s.uint32(18).bytes(i.data),i.seqno!=null&&Object.hasOwnProperty.call(i,"seqno")&&s.uint32(26).bytes(i.seqno),i.topicIDs!=null&&i.topicIDs.length)for(var o=0;o<i.topicIDs.length;++o)s.uint32(34).string(i.topicIDs[o]);return i.signature!=null&&Object.hasOwnProperty.call(i,"signature")&&s.uint32(42).bytes(i.signature),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&s.uint32(50).bytes(i.key),s},e.decode=function(i,s){i instanceof Fr||(i=Fr.create(i));for(var o=s===void 0?i.len:i.pos+s,a=new ve.RPC.Message;i.pos<o;){var u=i.uint32();switch(u>>>3){case 1:a.from=i.bytes();break;case 2:a.data=i.bytes();break;case 3:a.seqno=i.bytes();break;case 4:a.topicIDs&&a.topicIDs.length||(a.topicIDs=[]),a.topicIDs.push(i.string());break;case 5:a.signature=i.bytes();break;case 6:a.key=i.bytes();break;default:i.skipType(u&7);break}}return a},e.fromObject=function(i){if(i instanceof ve.RPC.Message)return i;var s=new ve.RPC.Message;if(i.from!=null&&(typeof i.from=="string"?M.base64.decode(i.from,s.from=M.newBuffer(M.base64.length(i.from)),0):i.from.length&&(s.from=i.from)),i.data!=null&&(typeof i.data=="string"?M.base64.decode(i.data,s.data=M.newBuffer(M.base64.length(i.data)),0):i.data.length&&(s.data=i.data)),i.seqno!=null&&(typeof i.seqno=="string"?M.base64.decode(i.seqno,s.seqno=M.newBuffer(M.base64.length(i.seqno)),0):i.seqno.length&&(s.seqno=i.seqno)),i.topicIDs){if(!Array.isArray(i.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var o=0;o<i.topicIDs.length;++o)s.topicIDs[o]=String(i.topicIDs[o])}return i.signature!=null&&(typeof i.signature=="string"?M.base64.decode(i.signature,s.signature=M.newBuffer(M.base64.length(i.signature)),0):i.signature.length&&(s.signature=i.signature)),i.key!=null&&(typeof i.key=="string"?M.base64.decode(i.key,s.key=M.newBuffer(M.base64.length(i.key)),0):i.key.length&&(s.key=i.key)),s},e.toObject=function(i,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.topicIDs=[]),i.from!=null&&i.hasOwnProperty("from")&&(o.from=s.bytes===String?M.base64.encode(i.from,0,i.from.length):s.bytes===Array?Array.prototype.slice.call(i.from):i.from,s.oneofs&&(o._from="from")),i.data!=null&&i.hasOwnProperty("data")&&(o.data=s.bytes===String?M.base64.encode(i.data,0,i.data.length):s.bytes===Array?Array.prototype.slice.call(i.data):i.data,s.oneofs&&(o._data="data")),i.seqno!=null&&i.hasOwnProperty("seqno")&&(o.seqno=s.bytes===String?M.base64.encode(i.seqno,0,i.seqno.length):s.bytes===Array?Array.prototype.slice.call(i.seqno):i.seqno,s.oneofs&&(o._seqno="seqno")),i.topicIDs&&i.topicIDs.length){o.topicIDs=[];for(var a=0;a<i.topicIDs.length;++a)o.topicIDs[a]=i.topicIDs[a]}return i.signature!=null&&i.hasOwnProperty("signature")&&(o.signature=s.bytes===String?M.base64.encode(i.signature,0,i.signature.length):s.bytes===Array?Array.prototype.slice.call(i.signature):i.signature,s.oneofs&&(o._signature="signature")),i.key!=null&&i.hasOwnProperty("key")&&(o.key=s.bytes===String?M.base64.encode(i.key,0,i.key.length):s.bytes===Array?Array.prototype.slice.call(i.key):i.key,s.oneofs&&(o._key="key")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ht.util.toJSONOptions)},e}(),t}();Mu.exports=ve});var Hu=E(vi=>{"use strict";vi.byteLength=Jy;vi.toByteArray=tg;vi.fromByteArray=ig;var lt=[],He=[],Xy=typeof Uint8Array!="undefined"?Uint8Array:Array,Zs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(fr=0,Vu=Zs.length;fr<Vu;++fr)lt[fr]=Zs[fr],He[Zs.charCodeAt(fr)]=fr;var fr,Vu;He["-".charCodeAt(0)]=62;He["_".charCodeAt(0)]=63;function zu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Jy(t){var e=zu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function eg(t,e,r){return(e+r)*3/4-r}function tg(t){var e,r=zu(t),n=r[0],i=r[1],s=new Xy(eg(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=He[t.charCodeAt(u)]<<18|He[t.charCodeAt(u+1)]<<12|He[t.charCodeAt(u+2)]<<6|He[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=He[t.charCodeAt(u)]<<2|He[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=He[t.charCodeAt(u)]<<10|He[t.charCodeAt(u+1)]<<4|He[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function rg(t){return lt[t>>18&63]+lt[t>>12&63]+lt[t>>6&63]+lt[t&63]}function ng(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(rg(n));return i.join("")}function ig(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(ng(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(lt[e>>2]+lt[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(lt[e>>10]+lt[e>>4&63]+lt[e<<2&63]+"=")),i.join("")}});var Gu=E(Xs=>{Xs.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-f)-1,d>>=-f,f+=a;f>0;s=s*256+t[e+h],h+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+h],h+=l,f-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(d?-1:1)*o*Math.pow(2,s-n)};Xs.write=function(t,e,r,n,i,s){var o,a,u,c=s*8-i-1,f=(1<<c)-1,h=f>>1,l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?e+=l/u:e+=l*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*u-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+d]=o&255,d+=p,o/=256,c-=8);t[r+d-p]|=y*128}});var lr=E(Vr=>{"use strict";var Js=Hu(),Ur=Gu(),ju=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Vr.Buffer=m;Vr.SlowBuffer=fg;Vr.INSPECT_MAX_BYTES=50;var bi=2147483647;Vr.kMaxLength=bi;m.TYPED_ARRAY_SUPPORT=sg();!m.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function sg(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.byteOffset}});function Tt(t){if(t>bi)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,m.prototype),e}function m(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return eo(t)}return Wu(t,e,r)}m.poolSize=8192;function Wu(t,e,r){if(typeof t=="string")return ag(t,e);if(ArrayBuffer.isView(t))return ug(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(pt(t,ArrayBuffer)||t&&pt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(pt(t,SharedArrayBuffer)||t&&pt(t.buffer,SharedArrayBuffer)))return ro(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return m.from(n,e,r);let i=cg(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return m.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}m.from=function(t,e,r){return Wu(t,e,r)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);function $u(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function og(t,e,r){return $u(t),t<=0?Tt(t):e!==void 0?typeof r=="string"?Tt(t).fill(e,r):Tt(t).fill(e):Tt(t)}m.alloc=function(t,e,r){return og(t,e,r)};function eo(t){return $u(t),Tt(t<0?0:no(t)|0)}m.allocUnsafe=function(t){return eo(t)};m.allocUnsafeSlow=function(t){return eo(t)};function ag(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!m.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Yu(t,e)|0,n=Tt(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function to(t){let e=t.length<0?0:no(t.length)|0,r=Tt(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function ug(t){if(pt(t,Uint8Array)){let e=new Uint8Array(t);return ro(e.buffer,e.byteOffset,e.byteLength)}return to(t)}function ro(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,m.prototype),n}function cg(t){if(m.isBuffer(t)){let e=no(t.length)|0,r=Tt(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||oo(t.length)?Tt(0):to(t);if(t.type==="Buffer"&&Array.isArray(t.data))return to(t.data)}function no(t){if(t>=bi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+bi.toString(16)+" bytes");return t|0}function fg(t){return+t!=t&&(t=0),m.alloc(+t)}m.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==m.prototype};m.compare=function(e,r){if(pt(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),pt(r,Uint8Array)&&(r=m.from(r,r.offset,r.byteLength)),!m.isBuffer(e)||!m.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};m.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return m.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=m.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(pt(o,Uint8Array))s+o.length>i.length?(m.isBuffer(o)||(o=m.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(m.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Yu(t,e){if(m.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||pt(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return so(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ac(t).length;default:if(i)return n?-1:so(t).length;e=(""+e).toLowerCase(),i=!0}}m.byteLength=Yu;function hg(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return wg(this,e,r);case"utf8":case"utf-8":return Xu(this,e,r);case"ascii":return bg(this,e,r);case"latin1":case"binary":return mg(this,e,r);case"base64":return xg(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Eg(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}m.prototype._isBuffer=!0;function hr(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}m.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)hr(this,r,r+1);return this};m.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)hr(this,r,r+3),hr(this,r+1,r+2);return this};m.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)hr(this,r,r+7),hr(this,r+1,r+6),hr(this,r+2,r+5),hr(this,r+3,r+4);return this};m.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Xu(this,0,e):hg.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:m.compare(this,e)===0};m.prototype.inspect=function(){let e="",r=Vr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ju&&(m.prototype[ju]=m.prototype.inspect);m.prototype.compare=function(e,r,n,i,s){if(pt(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,u=Math.min(o,a),c=this.slice(i,s),f=e.slice(r,n);for(let h=0;h<u;++h)if(c[h]!==f[h]){o=c[h],a=f[h];break}return o<a?-1:a<o?1:0};function Qu(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,oo(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=m.from(e,n)),m.isBuffer(e))return e.length===0?-1:Zu(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Zu(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Zu(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(f,h){return s===1?f[h]:f.readUInt16BE(h*s)}let c;if(i){let f=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===a)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let f=!0;for(let h=0;h<a;h++)if(u(t,c+h)!==u(e,h)){f=!1;break}if(f)return c}return-1}m.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};m.prototype.indexOf=function(e,r,n){return Qu(this,e,r,n,!0)};m.prototype.lastIndexOf=function(e,r,n){return Qu(this,e,r,n,!1)};function lg(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(oo(a))return o;t[r+o]=a}return o}function pg(t,e,r,n){return mi(so(e,t.length-r),t,r,n)}function dg(t,e,r,n){return mi(Cg(e),t,r,n)}function yg(t,e,r,n){return mi(ac(e),t,r,n)}function gg(t,e,r,n){return mi(Ag(e,t.length-r),t,r,n)}m.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return lg(this,e,r,n);case"utf8":case"utf-8":return pg(this,e,r,n);case"ascii":case"latin1":case"binary":return dg(this,e,r,n);case"base64":return yg(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gg(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xg(t,e,r){return e===0&&r===t.length?Js.fromByteArray(t):Js.fromByteArray(t.slice(e,r))}function Xu(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let u,c,f,h;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)==128&&(h=(s&31)<<6|u&63,h>127&&(o=h));break;case 3:u=t[i+1],c=t[i+2],(u&192)==128&&(c&192)==128&&(h=(s&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],(u&192)==128&&(c&192)==128&&(f&192)==128&&(h=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return vg(n)}var Ju=4096;function vg(t){let e=t.length;if(e<=Ju)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ju));return r}function bg(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function mg(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function wg(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=Ig[t[s]];return i}function Eg(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}m.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,m.prototype),i};function we(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};m.prototype.readUintBE=m.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};m.prototype.readUint8=m.prototype.readUInt8=function(e,r){return e=e>>>0,r||we(e,1,this.length),this[e]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||we(e,2,this.length),this[e]|this[e+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||we(e,2,this.length),this[e]<<8|this[e+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||we(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};m.prototype.readBigUInt64LE=Gt(function(e){e=e>>>0,Mr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Sn(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});m.prototype.readBigUInt64BE=Gt(function(e){e=e>>>0,Mr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Sn(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});m.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};m.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||we(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};m.prototype.readInt8=function(e,r){return e=e>>>0,r||we(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};m.prototype.readInt16LE=function(e,r){e=e>>>0,r||we(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};m.prototype.readInt16BE=function(e,r){e=e>>>0,r||we(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};m.prototype.readInt32LE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};m.prototype.readInt32BE=function(e,r){return e=e>>>0,r||we(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};m.prototype.readBigInt64LE=Gt(function(e){e=e>>>0,Mr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Sn(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});m.prototype.readBigInt64BE=Gt(function(e){e=e>>>0,Mr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Sn(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});m.prototype.readFloatLE=function(e,r){return e=e>>>0,r||we(e,4,this.length),Ur.read(this,e,!0,23,4)};m.prototype.readFloatBE=function(e,r){return e=e>>>0,r||we(e,4,this.length),Ur.read(this,e,!1,23,4)};m.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||we(e,8,this.length),Ur.read(this,e,!0,52,8)};m.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||we(e,8,this.length),Ur.read(this,e,!1,52,8)};function Ke(t,e,r,n,i,s){if(!m.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ke(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ke(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};m.prototype.writeUint8=m.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,1,255,0),this[r]=e&255,r+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function ec(t,e,r,n,i){oc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function tc(t,e,r,n,i){oc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}m.prototype.writeBigUInt64LE=Gt(function(e,r=0){return ec(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeBigUInt64BE=Gt(function(e,r=0){return tc(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ke(this,e,r,n,u-1,-u)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};m.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ke(this,e,r,n,u-1,-u)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};m.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};m.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};m.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};m.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};m.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ke(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};m.prototype.writeBigInt64LE=Gt(function(e,r=0){return ec(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});m.prototype.writeBigInt64BE=Gt(function(e,r=0){return tc(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rc(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function nc(t,e,r,n,i){return e=+e,r=r>>>0,i||rc(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ur.write(t,e,r,n,23,4),r+4}m.prototype.writeFloatLE=function(e,r,n){return nc(this,e,r,!0,n)};m.prototype.writeFloatBE=function(e,r,n){return nc(this,e,r,!1,n)};function ic(t,e,r,n,i){return e=+e,r=r>>>0,i||rc(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ur.write(t,e,r,n,52,8),r+8}m.prototype.writeDoubleLE=function(e,r,n){return ic(this,e,r,!0,n)};m.prototype.writeDoubleBE=function(e,r,n){return ic(this,e,r,!1,n)};m.prototype.copy=function(e,r,n,i){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};m.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!m.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=m.isBuffer(e)?e:m.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var qr={};function io(t,e,r){qr[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}io("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);io("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);io("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=sc(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=sc(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function sc(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Sg(t,e,r){Mr(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Sn(e,t.length-(r+1))}function oc(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new qr.ERR_OUT_OF_RANGE("value",a,t)}Sg(n,i,s)}function Mr(t,e){if(typeof t!="number")throw new qr.ERR_INVALID_ARG_TYPE(e,"number",t)}function Sn(t,e,r){throw Math.floor(t)!==t?(Mr(t,r),new qr.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new qr.ERR_BUFFER_OUT_OF_BOUNDS:new qr.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Bg=/[^+/0-9A-Za-z-_]/g;function _g(t){if(t=t.split("=")[0],t=t.trim().replace(Bg,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function so(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Cg(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Ag(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function ac(t){return Js.toByteArray(_g(t))}function mi(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function pt(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function oo(t){return t!==t}var Ig=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Gt(t){return typeof BigInt=="undefined"?Tg:t}function Tg(){throw new Error("BigInt not supported")}});var ao=E((Cw,cc)=>{"use strict";var{Buffer:rt}=lr(),uc=Symbol.for("BufferList");function re(t){if(!(this instanceof re))return new re(t);re._init.call(this,t)}re._init=function(e){Object.defineProperty(this,uc,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};re.prototype._new=function(e){return new re(e)};re.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};re.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};re.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};re.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};re.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||rt.alloc(0);let s=!!e,o=this._offset(n),a=i-n,u=a,c=s&&r||0,f=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:rt.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,c),c+=this._bufs[h].length;return e}if(u<=this._bufs[o[0]].length-f)return s?this._bufs[o[0]].copy(e,r,f,f+u):this._bufs[o[0]].slice(f,f+u);s||(e=rt.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let l=this._bufs[h].length-f;if(u>l)this._bufs[h].copy(e,c,f),c+=l;else{this._bufs[h].copy(e,c,f,f+u),c+=l;break}u-=l,f&&(f=0)}return e.length>c?e.slice(0,c):e};re.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};re.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};re.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};re.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};re.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(rt.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(rt.from(e));return this};re.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};re.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=rt.from([t]):typeof t=="string"?t=rt.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=rt.from(t.buffer,t.byteOffset,t.byteLength):rt.isBuffer(t)||(t=rt.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let u=o.indexOf(t,s);if(u!==-1)return this._reverseOffset([i,u]);s=o.length-t.length+1}else{let u=this._reverseOffset([i,s]);if(this._match(u,t))return u;s++}s=0}return-1};re.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?re.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:re.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();re.prototype._isBufferList=function(e){return e instanceof re||re.isBufferList(e)};re.isBufferList=function(e){return e!=null&&e[uc]};cc.exports=re});var lc=E((Aw,hc)=>{hc.exports=uo;var fc=128,Rg=127,Pg=~Rg,Dg=Math.pow(2,31);function uo(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw uo.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Dg;)e[r++]=t&255|fc,t/=128;for(;t&Pg;)e[r++]=t&255|fc,t>>>=7;return e[r]=t|0,uo.bytes=r-n+1,e}});var yc=E((Iw,dc)=>{dc.exports=co;var Ng=128,pc=127;function co(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o||n>49)throw co.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&pc)<<n:(s&pc)*Math.pow(2,n),n+=7}while(s>=Ng);return co.bytes=i-e,r}});var xc=E((Tw,gc)=>{var Lg=Math.pow(2,7),kg=Math.pow(2,14),Og=Math.pow(2,21),Kg=Math.pow(2,28),Fg=Math.pow(2,35),Ug=Math.pow(2,42),qg=Math.pow(2,49),Mg=Math.pow(2,56),Vg=Math.pow(2,63);gc.exports=function(t){return t<Lg?1:t<kg?2:t<Og?3:t<Kg?4:t<Fg?5:t<Ug?6:t<qg?7:t<Mg?8:t<Vg?9:10}});var fo=E((Rw,vc)=>{vc.exports={encode:lc(),decode:yc(),encodingLength:xc()}});var ho=E((Pw,wc)=>{"use strict";var bc=fo(),{Buffer:zg}=lr(),mc=(t,e,r)=>{let n=bc.encode(t,e,r);return mc.bytes=bc.encode.bytes,e||zg.from(n)};wc.exports=mc});var Ac=E((Dw,wi)=>{"use strict";var{Buffer:Ec}=lr(),Sc=ao(),Bc=ho(),lo=8,_c=10*1024;function Cc(t){t=t||{};let e=Math.max(t.poolSize||_c,t.minPoolSize||lo),r=t.lengthEncoder||Bc;return async function*(i){let s=Ec.alloc(e),o=0;for await(let a of i){r(a.length,s,o);let u=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<lo&&(s=Ec.alloc(e),o=0),yield new Sc().append(u).append(a)}}}Cc.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||Bc;return new Sc([r(t.length),t.slice()])};wi.exports=Cc;wi.exports.MIN_POOL_SIZE=lo;wi.exports.DEFAULT_POOL_SIZE=_c});var po=E((Nw,Rc)=>{"use strict";var Ic=fo(),{Buffer:Hg}=lr(),Gg=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),Tc=t=>{let e=Ic.decode(Hg.isBuffer(t)?t:Gg(t));return Tc.bytes=Ic.decode.bytes,e};Rc.exports=Tc});var Lc=E((Lw,Ei)=>{"use strict";var{Buffer:jg}=lr(),yo=ao(),Wg=po(),Pc=8,Dc=1024*1024*4,Nc=jg.alloc(0),jt={LENGTH:"readLength",DATA:"readData"},$g={[jt.LENGTH]:(t,e,r,n)=>{e=e.append(t);let i;try{i=n.lengthDecoder(e)}catch(s){if(e.length>n.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:jt.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new yo,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData(Nc),{mode:jt.LENGTH,chunk:t,buffer:e,data:Nc}):{mode:jt.DATA,chunk:t,buffer:e,state:{dataLength:i},data:void 0}},[jt.DATA]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:jt.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:i}=r,s=e.shallowSlice(0,i),o=e.length>i?e.shallowSlice(i):void 0;return e=new yo,n.onData&&n.onData(s),{mode:jt.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function go(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||Wg,maxLengthLength:t.maxLengthLength||Pc,maxDataLength:t.maxDataLength||Dc,onLength:t.onLength,onData:t.onData};return async function*(n){let i=new yo,s=jt.LENGTH,o;for await(let a of n){let u=a;for(;u;){let c=$g[s](u,i,o,e);s=c.mode,u=c.chunk,i=c.buffer,o=c.state,c.data&&(yield c.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}go.fromReader=(t,e)=>{let r=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return go({...e||{},onLength:s=>{r=s}})(n)};Ei.exports=go;Ei.exports.MAX_LENGTH_LENGTH=Pc;Ei.exports.MAX_DATA_LENGTH=Dc});var Kc=E((kw,Oc)=>{"use strict";var{Buffer:Yg}=lr(),kc=(t,e,r)=>(e=e||Yg.allocUnsafe(4),e.writeInt32BE(t,r),e);kc.bytes=4;Oc.exports=kc});var qc=E((Ow,Uc)=>{"use strict";var Fc=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Fc.bytes=4;Uc.exports=Fc});var Mc=E(pr=>{"use strict";pr.encode=Ac();pr.decode=Lc();pr.varintEncode=ho();pr.varintDecode=po();pr.int32BEEncode=Kc();pr.int32BEDecode=qc()});var zc=E((Uw,Vc)=>{Vc.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var jc=E((Mw,Gc)=>{var Hc=zc();Gc.exports=class{constructor(e){this.hwm=e||16,this.head=new Hc(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new Hc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var $c=E((Vw,Wc)=>{var xo=jc();Wc.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new xo,n,i,s,o=()=>{if(!r.isEmpty()){if(t.writev){let y,x=[];for(;!r.isEmpty();){if(y=r.shift(),y.error)throw y.error;x.push(y.value)}return{done:y.done,value:x}}let p=r.shift();if(p.error)throw p.error;return p}return s?{done:!0}:new Promise((p,y)=>{i=x=>(i=null,x.error?y(x.error):t.writev&&!x.done?p({done:x.done,value:[x.value]}):p(x),n)})},a=p=>i?i(p):(r.push(p),n),u=p=>(r=new xo,i?i({error:p}):(r.push({error:p}),n)),c=p=>s?n:a({done:!1,value:p}),f=p=>s?n:(s=!0,p?u(p):a({done:!0})),h=()=>(r=new xo,f(),{done:!0}),l=p=>(f(p),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:o,return:h,throw:l,push:c,end:f},!e)return n;let d=n;return n={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:c,end(p){return d.end(p),e&&(e(p),e=null),n}},n}});var Qc=E((zw,Yc)=>{Yc.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Xc=E((Gw,Zc)=>{Zc.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var rf=E((jw,dr)=>{var Qg=Qc(),vo=Xc(),Jc=(t,e,r)=>bo(t,Array.isArray(e)?e:[{signal:e,options:r}]),bo=(t,e)=>{t=Qg(t),e=e.map(({signal:n,options:i})=>({signal:n,options:i||{}}));async function*r(){let n,i=()=>{n&&n()};for(let{signal:s}of e)s.addEventListener("abort",i);for(;;){let s;try{for(let{signal:a,options:u}of e)if(a.aborted){let{abortMessage:c,abortCode:f}=u;throw new vo(c,f)}let o=new Promise((a,u)=>{n=()=>{let{options:c}=e.find(({signal:l})=>l.aborted),{abortMessage:f,abortCode:h}=c;u(new vo(f,h))}});s=await Promise.race([o,t.next()]),n=null}catch(o){for(let{signal:c}of e)c.removeEventListener("abort",i);let a=e.find(({signal:c})=>c.aborted),u=o.type==="aborted"&&a;if(u&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&t.return().catch(c=>{a.options.onReturnError&&a.options.onReturnError(c)}),u&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",i)}return r()},ef=(t,e,r)=>tf(t,Array.isArray(e)?e:[{signal:e,options:r}]),tf=(t,e)=>r=>t(bo(r,e)),Zg=(t,e,r)=>Xg(t,Array.isArray(e)?e:[{signal:e,options:r}]),Xg=(t,e)=>({sink:tf(t.sink,e),source:bo(t.source,e)});dr.exports=Jc;dr.exports.AbortError=vo;dr.exports.source=Jc;dr.exports.sink=ef;dr.exports.transform=ef;dr.exports.duplex=Zg});var sf=E((Ww,Si)=>{"use strict";var{AbortController:nf,AbortSignal:Jg}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;Si.exports=nf;Si.exports.AbortSignal=Jg;Si.exports.default=nf});var hf=E(($w,ff)=>{"use strict";var of=vn(),e1=Object.assign(of("libp2p-pubsub:peer-streams"),{error:of("libp2p-pubsub:peer-streams:err")}),{EventEmitter:t1}=Is(),af=Mc(),r1=$c(),{pipe:uf}=Rs(),{source:n1}=rf(),i1=sf().default,cf=class extends t1{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new i1,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=n1(uf(this._rawInboundStream,af.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=r1({onEnd:n=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,n&&this.emit("close")}}),uf(this.outboundStream,af.encode(),this._rawOutboundStream).catch(n=>{e1.error(n)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};ff.exports=cf});var pf=E(lf=>{"use strict";var s1={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};lf.SignaturePolicy=s1});var yf=E((Qw,df)=>{"use strict";var Bi=65536;function o1(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>Bi)for(;r<t;)r+Bi>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+Bi)),r+=Bi);else crypto.getRandomValues(e);return e}df.exports=o1});var _i=E((Zw,gf)=>{"use strict";var a1=yf(),u1=Je();gf.exports=function(t){if(isNaN(t)||t<=0)throw u1(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return a1(t)}});var dt={};_e(dt,{fromString:()=>c1});function c1(t,e="utf8"){let r=ii[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var yt=Z(()=>{Cs()});var Ai=E((Jw,vf)=>{"use strict";var yr=xi(),Ci=yr.Reader,xf=yr.Writer,Ae=yr.util,Ge=yr.roots["libp2p-crypto-keys"]||(yr.roots["libp2p-crypto-keys"]={});Ge.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Ge.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Ae.newBuffer([]),t.encode=function(r,n){return n||(n=xf.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof Ci||(r=Ci.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Ge.PublicKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Ae.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Ae.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ge.PublicKey)return r;var n=new Ge.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ae.base64.decode(r.Data,n.Data=Ae.newBuffer(Ae.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Ae.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Ge.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Ae.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.util.toJSONOptions)},t}();Ge.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Ae.newBuffer([]),t.encode=function(r,n){return n||(n=xf.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof Ci||(r=Ci.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Ge.PrivateKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Ae.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Ae.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ge.PrivateKey)return r;var n=new Ge.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ae.base64.decode(r.Data,n.Data=Ae.newBuffer(Ae.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Ae.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Ge.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Ae.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,yr.util.toJSONOptions)},t}();vf.exports=Ge});var J=E((eE,bf)=>{bf.exports={options:{usePureJavaScript:!1}}});var Ef=E((tE,wf)=>{var mo={};wf.exports=mo;var mf={};mo.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=f1(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};mo.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=mf[e];if(!r){r=mf[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<o.length;++u)c+=o[u]*i,o[u]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function f1(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}});var ge=E((rE,Cf)=>{var Sf=J(),Bf=Ef(),g=Cf.exports=Sf.util=Sf.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){g.nextTick=process.nextTick,typeof setImmediate=="function"?g.setImmediate=setImmediate:g.setImmediate=g.nextTick;return}if(typeof setImmediate=="function"){g.setImmediate=function(){return setImmediate.apply(void 0,arguments)},g.nextTick=function(a){return setImmediate(a)};return}if(g.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];g.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=g.setImmediate;g.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}g.nextTick=g.setImmediate})();g.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;g.globalScope=function(){return g.isNodejs?globalThis:typeof self=="undefined"?window:self}();g.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};g.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};g.isArrayBufferView=function(t){return t&&g.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Bn(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}g.ByteBuffer=wo;function wo(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(g.isArrayBuffer(t)||g.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof wo||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}g.ByteStringBuffer=wo;var h1=4096;g.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>h1&&(this.data.substr(0,1),this._constructedStringLength=0)};g.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};g.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};g.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};g.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};g.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};g.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(g.encodeUtf8(t))};g.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};g.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};g.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};g.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};g.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};g.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};g.ByteStringBuffer.prototype.putInt=function(t,e){Bn(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};g.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};g.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};g.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};g.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};g.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};g.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};g.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};g.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};g.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};g.ByteStringBuffer.prototype.getInt=function(t){Bn(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};g.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};g.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};g.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};g.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};g.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};g.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};g.ByteStringBuffer.prototype.copy=function(){var t=g.createBuffer(this.data);return t.read=this.read,t};g.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};g.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};g.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};g.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};g.ByteStringBuffer.prototype.toString=function(){return g.decodeUtf8(this.bytes())};function l1(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=g.isArrayBuffer(t),n=g.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}g.DataBuffer=l1;g.DataBuffer.prototype.length=function(){return this.write-this.read};g.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};g.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};g.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};g.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};g.DataBuffer.prototype.putBytes=function(t,e){if(g.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(g.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof g.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&g.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof g.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=g.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=g.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};g.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};g.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};g.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};g.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};g.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};g.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};g.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};g.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};g.DataBuffer.prototype.putInt=function(t,e){Bn(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};g.DataBuffer.prototype.putSignedInt=function(t,e){return Bn(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};g.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};g.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};g.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};g.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};g.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};g.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};g.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};g.DataBuffer.prototype.getInt=function(t){Bn(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};g.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};g.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};g.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};g.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};g.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};g.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};g.DataBuffer.prototype.copy=function(){return new g.DataBuffer(this)};g.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};g.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};g.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};g.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};g.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return g.binary.raw.encode(e);if(t==="hex")return g.binary.hex.encode(e);if(t==="base64")return g.binary.base64.encode(e);if(t==="utf8")return g.text.utf8.decode(e);if(t==="utf16")return g.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};g.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=g.encodeUtf8(t)),new g.ByteBuffer(t)};g.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};g.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};g.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};g.bytesToHex=function(t){return g.createBuffer(t).toHex()};g.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$t=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";g.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=Wt.charAt(i>>2),r+=Wt.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Wt.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Wt.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};g.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=$t[t.charCodeAt(o++)-43],n=$t[t.charCodeAt(o++)-43],i=$t[t.charCodeAt(o++)-43],s=$t[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};g.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};g.decodeUtf8=function(t){return decodeURIComponent(escape(t))};g.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Bf.encode,decode:Bf.decode}};g.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};g.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};g.binary.hex.encode=g.bytesToHex;g.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};g.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=Wt.charAt(i>>2),r+=Wt.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Wt.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Wt.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};g.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,u=0,c=r;u<t.length;)i=$t[t.charCodeAt(u++)-43],s=$t[t.charCodeAt(u++)-43],o=$t[t.charCodeAt(u++)-43],a=$t[t.charCodeAt(u++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return e?c-r:n.subarray(0,c)};g.binary.base58.encode=function(t,e){return g.binary.baseN.encode(t,_f,e)};g.binary.base58.decode=function(t,e){return g.binary.baseN.decode(t,_f,e)};g.text={utf8:{},utf16:{}};g.text.utf8.encode=function(t,e,r){t=g.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};g.text.utf8.decode=function(t){return g.decodeUtf8(String.fromCharCode.apply(null,t))};g.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};g.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};g.deflate=function(t,e,r){if(e=g.decode64(t.deflate(g.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};g.inflate=function(t,e,r){var n=t.inflate(g.encode64(e)).rval;return n===null?null:g.decode64(n)};var Eo=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=g.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},So=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(g.decode64(r))),r},p1=function(t,e,r,n){var i=So(t,e);i===null&&(i={}),i[r]=n,Eo(t,e,i)},d1=function(t,e,r){var n=So(t,e);return n!==null&&(n=r in n?n[r]:null),n},y1=function(t,e,r){var n=So(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),Eo(t,e,n)}},g1=function(t,e){Eo(t,e,null)},Ii=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return n};g.setItem=function(t,e,r,n,i){Ii(p1,arguments,i)};g.getItem=function(t,e,r,n){return Ii(d1,arguments,n)};g.removeItem=function(t,e,r,n){Ii(y1,arguments,n)};g.clearItems=function(t,e,r){Ii(g1,arguments,r)};g.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var Ti=null;g.getQueryVariables=function(t){var e=function(n){for(var i={},s=n.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),u,c;a>0?(u=s[o].substring(0,a),c=s[o].substring(a+1)):(u=s[o],c=null),u in i||(i[u]=[]),!(u in Object.prototype)&&c!==null&&i[u].push(unescape(c))}return i},r;return typeof t=="undefined"?(Ti===null&&(typeof window!="undefined"&&window.location&&window.location.search?Ti=e(window.location.search.substring(1)):Ti={}),r=Ti):r=e(t),r};g.parseFragment=function(t){var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var i=e.split("/");i.length>0&&i[0]===""&&i.shift();var s=r===""?{}:g.getQueryVariables(r);return{pathString:e,queryString:r,path:i,query:s}};g.makeRequest=function(t){var e=g.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(n){return typeof n=="undefined"?e.path:e.path[n]},getQuery:function(n,i){var s;return typeof n=="undefined"?s=e.query:(s=e.query[n],s&&typeof i!="undefined"&&(s=s[i])),s},getQueryLast:function(n,i){var s,o=r.getQuery(n);return o?s=o[o.length-1]:s=i,s}};return r};g.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};g.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};g.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};g.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+a:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};g.formatSize=function(t){return t>=1073741824?t=g.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=g.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=g.formatNumber(t/1024,0)+" KiB":t=g.formatNumber(t,0)+" bytes",t};g.bytesFromIP=function(t){return t.indexOf(".")!==-1?g.bytesFromIPv4(t):t.indexOf(":")!==-1?g.bytesFromIPv6(t):null};g.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=g.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};g.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=g.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=g.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};g.bytesToIP=function(t){return t.length===4?g.bytesToIPv4(t):t.length===16?g.bytesToIPv6(t):null};g.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};g.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=g.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};g.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in g&&!t.update)return e(null,g.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return g.cores=navigator.hardwareConcurrency,e(null,g.cores);if(typeof Worker=="undefined")return g.cores=1,e(null,g.cores);if(typeof Blob=="undefined")return g.cores=2,e(null,g.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,u){if(a===0){var c=Math.floor(o.reduce(function(f,h){return f+h},0)/o.length);return g.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,g.cores)}i(u,function(f,h){o.push(s(u,h)),n(o,a-1,u)})}function i(o,a){for(var u=[],c=[],f=0;f<o;++f){var h=new Worker(r);h.addEventListener("message",function(l){if(c.push(l.data),c.length===o){for(var d=0;d<o;++d)u[d].terminate();a(null,c)}}),u.push(h)}for(var f=0;f<o;++f)u[f].postMessage(f)}function s(o,a){for(var u=[],c=0;c<o;++c)for(var f=a[c],h=u[c]=[],l=0;l<o;++l)if(c!==l){var d=a[l];(f.st>d.st&&f.st<d.et||d.st>f.st&&d.st<f.et)&&h.push(l)}return u.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var Ri=E((nE,Af)=>{var _n=J();_n.pki=_n.pki||{};var Bo=Af.exports=_n.pki.oids=_n.oids=_n.oids||{};function I(t,e){Bo[t]=e,Bo[e]=t}function Y(t,e){Bo[t]=e}I("1.2.840.113549.1.1.1","rsaEncryption");I("1.2.840.113549.1.1.4","md5WithRSAEncryption");I("1.2.840.113549.1.1.5","sha1WithRSAEncryption");I("1.2.840.113549.1.1.7","RSAES-OAEP");I("1.2.840.113549.1.1.8","mgf1");I("1.2.840.113549.1.1.9","pSpecified");I("1.2.840.113549.1.1.10","RSASSA-PSS");I("1.2.840.113549.1.1.11","sha256WithRSAEncryption");I("1.2.840.113549.1.1.12","sha384WithRSAEncryption");I("1.2.840.113549.1.1.13","sha512WithRSAEncryption");I("1.3.101.112","EdDSA25519");I("1.2.840.10040.4.3","dsa-with-sha1");I("1.3.14.3.2.7","desCBC");I("1.3.14.3.2.26","sha1");I("2.16.840.1.101.3.4.2.1","sha256");I("2.16.840.1.101.3.4.2.2","sha384");I("2.16.840.1.101.3.4.2.3","sha512");I("1.2.840.113549.2.5","md5");I("1.2.840.113549.1.7.1","data");I("1.2.840.113549.1.7.2","signedData");I("1.2.840.113549.1.7.3","envelopedData");I("1.2.840.113549.1.7.4","signedAndEnvelopedData");I("1.2.840.113549.1.7.5","digestedData");I("1.2.840.113549.1.7.6","encryptedData");I("1.2.840.113549.1.9.1","emailAddress");I("1.2.840.113549.1.9.2","unstructuredName");I("1.2.840.113549.1.9.3","contentType");I("1.2.840.113549.1.9.4","messageDigest");I("1.2.840.113549.1.9.5","signingTime");I("1.2.840.113549.1.9.6","counterSignature");I("1.2.840.113549.1.9.7","challengePassword");I("1.2.840.113549.1.9.8","unstructuredAddress");I("1.2.840.113549.1.9.14","extensionRequest");I("1.2.840.113549.1.9.20","friendlyName");I("1.2.840.113549.1.9.21","localKeyId");I("1.2.840.113549.1.9.22.1","x509Certificate");I("1.2.840.113549.1.12.10.1.1","keyBag");I("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");I("1.2.840.113549.1.12.10.1.3","certBag");I("1.2.840.113549.1.12.10.1.4","crlBag");I("1.2.840.113549.1.12.10.1.5","secretBag");I("1.2.840.113549.1.12.10.1.6","safeContentsBag");I("1.2.840.113549.1.5.13","pkcs5PBES2");I("1.2.840.113549.1.5.12","pkcs5PBKDF2");I("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");I("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");I("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");I("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");I("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");I("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");I("1.2.840.113549.2.7","hmacWithSHA1");I("1.2.840.113549.2.8","hmacWithSHA224");I("1.2.840.113549.2.9","hmacWithSHA256");I("1.2.840.113549.2.10","hmacWithSHA384");I("1.2.840.113549.2.11","hmacWithSHA512");I("1.2.840.113549.3.7","des-EDE3-CBC");I("2.16.840.1.101.3.4.1.2","aes128-CBC");I("2.16.840.1.101.3.4.1.22","aes192-CBC");I("2.16.840.1.101.3.4.1.42","aes256-CBC");I("2.5.4.3","commonName");I("2.5.4.5","serialName");I("2.5.4.6","countryName");I("2.5.4.7","localityName");I("2.5.4.8","stateOrProvinceName");I("2.5.4.9","streetAddress");I("2.5.4.10","organizationName");I("2.5.4.11","organizationalUnitName");I("2.5.4.13","description");I("2.5.4.15","businessCategory");I("2.5.4.17","postalCode");I("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");I("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");I("2.16.840.1.113730.1.1","nsCertType");I("2.16.840.1.113730.1.13","nsComment");Y("2.5.29.1","authorityKeyIdentifier");Y("2.5.29.2","keyAttributes");Y("2.5.29.3","certificatePolicies");Y("2.5.29.4","keyUsageRestriction");Y("2.5.29.5","policyMapping");Y("2.5.29.6","subtreesConstraint");Y("2.5.29.7","subjectAltName");Y("2.5.29.8","issuerAltName");Y("2.5.29.9","subjectDirectoryAttributes");Y("2.5.29.10","basicConstraints");Y("2.5.29.11","nameConstraints");Y("2.5.29.12","policyConstraints");Y("2.5.29.13","basicConstraints");I("2.5.29.14","subjectKeyIdentifier");I("2.5.29.15","keyUsage");Y("2.5.29.16","privateKeyUsagePeriod");I("2.5.29.17","subjectAltName");I("2.5.29.18","issuerAltName");I("2.5.29.19","basicConstraints");Y("2.5.29.20","cRLNumber");Y("2.5.29.21","cRLReason");Y("2.5.29.22","expirationDate");Y("2.5.29.23","instructionCode");Y("2.5.29.24","invalidityDate");Y("2.5.29.25","cRLDistributionPoints");Y("2.5.29.26","issuingDistributionPoint");Y("2.5.29.27","deltaCRLIndicator");Y("2.5.29.28","issuingDistributionPoint");Y("2.5.29.29","certificateIssuer");Y("2.5.29.30","nameConstraints");I("2.5.29.31","cRLDistributionPoints");I("2.5.29.32","certificatePolicies");Y("2.5.29.33","policyMappings");Y("2.5.29.34","policyConstraints");I("2.5.29.35","authorityKeyIdentifier");Y("2.5.29.36","policyConstraints");I("2.5.29.37","extKeyUsage");Y("2.5.29.46","freshestCRL");Y("2.5.29.54","inhibitAnyPolicy");I("1.3.6.1.4.1.11129.2.4.2","timestampList");I("1.3.6.1.5.5.7.1.1","authorityInfoAccess");I("1.3.6.1.5.5.7.3.1","serverAuth");I("1.3.6.1.5.5.7.3.2","clientAuth");I("1.3.6.1.5.5.7.3.3","codeSigning");I("1.3.6.1.5.5.7.3.4","emailProtection");I("1.3.6.1.5.5.7.3.8","timeStamping")});var An=E((iE,Tf)=>{var oe=J();ge();Ri();var R=Tf.exports=oe.asn1=oe.asn1||{};R.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};R.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};R.create=function(t,e,r,n,i){if(oe.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||oe.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=R.copy(a)),a};R.copy=function(t,e){var r;if(oe.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(R.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:R.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};R.equals=function(t,e,r){if(oe.util.isArray(t)){if(!oe.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!R.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&R.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};R.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Cn(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var x1=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;Cn(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};R.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=oe.util.createBuffer(t)),Pi(t,t.length(),0,e)};function Pi(t,e,r,n){var i;Cn(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var u=x1(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=u,c}u=e}var f,h,l=(s&32)==32;if(l)if(f=[],u===void 0)for(;;){if(Cn(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(Pi(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),f.push(Pi(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(f===void 0&&o===R.Class.UNIVERSAL&&a===R.Type.BITSTRING&&(h=t.bytes(u)),f===void 0&&n.decodeBitStrings&&o===R.Class.UNIVERSAL&&a===R.Type.BITSTRING&&u>1){var d=t.read,p=e,y=0;if(a===R.Type.BITSTRING&&(Cn(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var x={verbose:n.verbose,strict:!0,decodeBitStrings:!0},b=Pi(t,e,r+1,x),S=i-t.length();e-=S,a==R.Type.BITSTRING&&S++;var A=b.tagClass;S===u&&(A===R.Class.UNIVERSAL||A===R.Class.CONTEXT_SPECIFIC)&&(f=[b])}catch(T){}f===void 0&&(t.read=d,e=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(a===R.Type.BMPSTRING)for(f="";u>0;u-=2)Cn(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(u)}var L=h===void 0?null:{bitStringContents:h};return R.create(o,a,l,f,L)}R.toDer=function(t){var e=oe.util.createBuffer(),r=t.tagClass|t.type,n=oe.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=R.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(R.toDer(t.value[s]))}else if(t.type===R.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===R.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};R.oidToDer=function(t){var e=t.split("."),r=oe.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};R.derToOid=function(t){var e;typeof t=="string"&&(t=oe.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};R.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),c&&(u=t.charAt(c),u==="+"||u==="-")){var f=parseInt(t.substr(c+1,2),10),h=parseInt(t.substr(c+4,2),10),l=f*60+h;l*=6e4,u==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};R.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);c=d*60+p,c*=6e4,l==="+"&&(c*=-1),f=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(s,o,a,u)),e};R.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};R.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};R.integerToDer=function(t){var e=oe.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};R.derToInteger=function(t){typeof t=="string"&&(t=oe.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};R.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&oe.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=R.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var If=/[^\\u0000-\\u00ff]/;R.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case R.Class.UNIVERSAL:n+="Universal:";break;case R.Class.APPLICATION:n+="Application:";break;case R.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case R.Class.PRIVATE:n+="Private:";break}if(t.tagClass===R.Class.UNIVERSAL)switch(n+=t.type,t.type){case R.Type.NONE:n+=" (None)";break;case R.Type.BOOLEAN:n+=" (Boolean)";break;case R.Type.INTEGER:n+=" (Integer)";break;case R.Type.BITSTRING:n+=" (Bit string)";break;case R.Type.OCTETSTRING:n+=" (Octet string)";break;case R.Type.NULL:n+=" (Null)";break;case R.Type.OID:n+=" (Object Identifier)";break;case R.Type.ODESC:n+=" (Object Descriptor)";break;case R.Type.EXTERNAL:n+=" (External or Instance of)";break;case R.Type.REAL:n+=" (Real)";break;case R.Type.ENUMERATED:n+=" (Enumerated)";break;case R.Type.EMBEDDED:n+=" (Embedded PDV)";break;case R.Type.UTF8:n+=" (UTF8)";break;case R.Type.ROID:n+=" (Relative Object Identifier)";break;case R.Type.SEQUENCE:n+=" (Sequence)";break;case R.Type.SET:n+=" (Set)";break;case R.Type.PRINTABLESTRING:n+=" (Printable String)";break;case R.Type.IA5String:n+=" (IA5String (ASCII))";break;case R.Type.UTCTIME:n+=" (UTC time)";break;case R.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case R.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=R.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===R.Type.OID){var u=R.derToOid(t.value);n+=u,oe.pki&&oe.pki.oids&&u in oe.pki.oids&&(n+=" ("+oe.pki.oids[u]+") ")}if(t.type===R.Type.INTEGER)try{n+=R.derToInteger(t.value)}catch(f){n+="0x"+oe.util.bytesToHex(t.value)}else if(t.type===R.Type.BITSTRING){if(t.value.length>1?n+="0x"+oe.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else t.type===R.Type.OCTETSTRING?(If.test(t.value)||(n+="("+t.value+") "),n+="0x"+oe.util.bytesToHex(t.value)):t.type===R.Type.UTF8?n+=oe.util.decodeUtf8(t.value):t.type===R.Type.PRINTABLESTRING||t.type===R.Type.IA5String?n+=t.value:If.test(t.value)?n+="0x"+oe.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Co=E((sE,Rf)=>{var Ee=J();ge();Rf.exports=Ee.cipher=Ee.cipher||{};Ee.cipher.algorithms=Ee.cipher.algorithms||{};Ee.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ee.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ee.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ee.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ee.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ee.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ee.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ee.cipher.algorithms[t]=e};Ee.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ee.cipher.algorithms?Ee.cipher.algorithms[t]:null};var _o=Ee.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};_o.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ee.util.createBuffer(),this.output=t.output||Ee.util.createBuffer(),this.mode.start(e)};_o.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};_o.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Io=E((oE,Pf)=>{var Se=J();ge();Se.cipher=Se.cipher||{};var V=Pf.exports=Se.cipher.modes=Se.cipher.modes||{};V.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.ecb.prototype.start=function(t){};V.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};V.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};V.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};V.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};V.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Di(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};V.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};V.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};V.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};V.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};V.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Se.util.createBuffer(),this._partialBytes=0};V.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Se.util.createBuffer(),this._partialBytes=0};V.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb.prototype.decrypt=V.ofb.prototype.encrypt;V.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Se.util.createBuffer(),this._partialBytes=0};V.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Di(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ni(this._inBlock)};V.ctr.prototype.decrypt=V.ctr.prototype.encrypt;V.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Se.util.createBuffer(),this._partialBytes=0,this._R=3774873600};V.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Se.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Se.util.createBuffer(t.additionalData):r=Se.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Se.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ao(n*8)))}this._inBlock=this._j0.slice(0),Ni(this._inBlock),this._partialBytes=0,r=Se.util.createBuffer(r),this._aDataLength=Ao(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};V.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ni(this._inBlock)};V.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ni(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};V.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Se.util.createBuffer();var n=this._aDataLength.concat(Ao(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};V.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};V.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};V.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};V.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};V.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*e;a[u]=1<<e-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};V.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function Di(t,e){if(typeof t=="string"&&(t=Se.util.createBuffer(t)),Se.util.isArray(t)&&t.length>4){var r=t;t=Se.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Se.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function Ni(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Ao(t){return[t/4294967296|0,t&4294967295]}});var Do=E((aE,kf)=>{var ne=J();Co();Io();ge();kf.exports=ne.aes=ne.aes||{};ne.aes.startEncrypting=function(t,e,r,n){var i=Li({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ne.aes.createEncryptionCipher=function(t,e){return Li({key:t,output:null,decrypt:!1,mode:e})};ne.aes.startDecrypting=function(t,e,r,n){var i=Li({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ne.aes.createDecryptionCipher=function(t,e){return Li({key:t,output:null,decrypt:!0,mode:e})};ne.aes.Algorithm=function(t,e){To||Nf();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return Po(r._w,n,i,!1)},decrypt:function(n,i){return Po(r._w,n,i,!0)}}}),r._init=!1};ne.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ne.util.createBuffer(e);else if(ne.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ne.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ne.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ne.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Lf(e,t.decrypt&&!o),this._init=!0}};ne.aes._expandKey=function(t,e){return To||Nf(),Lf(t,e)};ne.aes._updateBlock=Po;zr("AES-ECB",ne.cipher.modes.ecb);zr("AES-CBC",ne.cipher.modes.cbc);zr("AES-CFB",ne.cipher.modes.cfb);zr("AES-OFB",ne.cipher.modes.ofb);zr("AES-CTR",ne.cipher.modes.ctr);zr("AES-GCM",ne.cipher.modes.gcm);function zr(t,e){var r=function(){return new ne.aes.Algorithm(t,e)};ne.cipher.registerAlgorithm(t,r)}var To=!1,Hr=4,De,Ro,Df,gr,nt;function Nf(){To=!0,Df=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;De=new Array(256),Ro=new Array(256),gr=new Array(4),nt=new Array(4);for(var e=0;e<4;++e)gr[e]=new Array(256),nt[e]=new Array(256);for(var r=0,n=0,i,s,o,a,u,c,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,De[r]=a,Ro[a]=r,u=t[a],i=t[r],s=t[i],o=t[s],c=u<<24^a<<16^a<<8^(a^u),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var h=0;h<4;++h)gr[h][r]=c,nt[h][a]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function Lf(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=Hr*o,u=s;u<a;++u)n=r[u-1],u%s==0?(n=De[n>>>16&255]<<24^De[n>>>8&255]<<16^De[n&255]<<8^De[n>>>24]^Df[i]<<24,i++):s>6&&u%s==4&&(n=De[n>>>24]<<24^De[n>>>16&255]<<16^De[n>>>8&255]<<8^De[n&255]),r[u]=r[u-s]^n;if(e){var c,f=nt[0],h=nt[1],l=nt[2],d=nt[3],p=r.slice(0);a=r.length;for(var u=0,y=a-Hr;u<a;u+=Hr,y-=Hr)if(u===0||u===a-Hr)p[u]=r[y],p[u+1]=r[y+3],p[u+2]=r[y+2],p[u+3]=r[y+1];else for(var x=0;x<Hr;++x)c=r[y+x],p[u+(3&-x)]=f[De[c>>>24]]^h[De[c>>>16&255]]^l[De[c>>>8&255]]^d[De[c&255]];r=p}return r}function Po(t,e,r,n){var i=t.length/4-1,s,o,a,u,c;n?(s=nt[0],o=nt[1],a=nt[2],u=nt[3],c=Ro):(s=gr[0],o=gr[1],a=gr[2],u=gr[3],c=De);var f,h,l,d,p,y,x;f=e[0]^t[0],h=e[n?3:1]^t[1],l=e[2]^t[2],d=e[n?1:3]^t[3];for(var b=3,S=1;S<i;++S)p=s[f>>>24]^o[h>>>16&255]^a[l>>>8&255]^u[d&255]^t[++b],y=s[h>>>24]^o[l>>>16&255]^a[d>>>8&255]^u[f&255]^t[++b],x=s[l>>>24]^o[d>>>16&255]^a[f>>>8&255]^u[h&255]^t[++b],d=s[d>>>24]^o[f>>>16&255]^a[h>>>8&255]^u[l&255]^t[++b],f=p,h=y,l=x;r[0]=c[f>>>24]<<24^c[h>>>16&255]<<16^c[l>>>8&255]<<8^c[d&255]^t[++b],r[n?3:1]=c[h>>>24]<<24^c[l>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^t[++b],r[2]=c[l>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[h&255]^t[++b],r[n?1:3]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[h>>>8&255]<<8^c[l&255]^t[++b]}function Li(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ne.cipher.createDecipher(r,t.key):n=ne.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ne.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Ff=E((uE,Kf)=>{var ae=J();Co();Io();ge();Kf.exports=ae.des=ae.des||{};ae.des.startEncrypting=function(t,e,r,n){var i=ki({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ae.des.createEncryptionCipher=function(t,e){return ki({key:t,output:null,decrypt:!1,mode:e})};ae.des.startDecrypting=function(t,e,r,n){var i=ki({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ae.des.createDecryptionCipher=function(t,e){return ki({key:t,output:null,decrypt:!0,mode:e})};ae.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Of(r._keys,n,i,!1)},decrypt:function(n,i){return Of(r._keys,n,i,!0)}}}),r._init=!1};ae.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ae.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=C1(e),this._init=!0}};gt("DES-ECB",ae.cipher.modes.ecb);gt("DES-CBC",ae.cipher.modes.cbc);gt("DES-CFB",ae.cipher.modes.cfb);gt("DES-OFB",ae.cipher.modes.ofb);gt("DES-CTR",ae.cipher.modes.ctr);gt("3DES-ECB",ae.cipher.modes.ecb);gt("3DES-CBC",ae.cipher.modes.cbc);gt("3DES-CFB",ae.cipher.modes.cfb);gt("3DES-OFB",ae.cipher.modes.ofb);gt("3DES-CTR",ae.cipher.modes.ctr);function gt(t,e){var r=function(){return new ae.des.Algorithm(t,e)};ae.cipher.registerAlgorithm(t,r)}var v1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],b1=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],m1=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],w1=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],E1=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],S1=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],B1=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],_1=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function C1(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,x=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,A,L=0;L<y;L++){var T=t.getInt32(),C=t.getInt32();A=(T>>>4^C)&252645135,C^=A,T^=A<<4,A=(C>>>-16^T)&65535,T^=A,C^=A<<-16,A=(T>>>2^C)&858993459,C^=A,T^=A<<2,A=(C>>>-16^T)&65535,T^=A,C^=A<<-16,A=(T>>>1^C)&1431655765,C^=A,T^=A<<1,A=(C>>>8^T)&16711935,T^=A,C^=A<<8,A=(T>>>1^C)&1431655765,C^=A,T^=A<<1,A=T<<8|C>>>20&240,T=C<<24|C<<8&16711680|C>>>8&65280|C>>>24&240,C=A;for(var O=0;O<b.length;++O){b[O]?(T=T<<2|T>>>26,C=C<<2|C>>>26):(T=T<<1|T>>>27,C=C<<1|C>>>27),T&=-15,C&=-15;var q=e[T>>>28]|r[T>>>24&15]|n[T>>>20&15]|i[T>>>16&15]|s[T>>>12&15]|o[T>>>8&15]|a[T>>>4&15],ce=u[C>>>28]|c[C>>>24&15]|f[C>>>20&15]|h[C>>>16&15]|l[C>>>12&15]|d[C>>>8&15]|p[C>>>4&15];A=(ce>>>16^q)&65535,x[S++]=q^A,x[S++]=ce^A<<16}}return x}function Of(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],u=e[1];o=(a>>>4^u)&252645135,u^=o,a^=o<<4,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=s[c+1],h=s[c+2],l=s[c];l!=f;l+=h){var d=u^t[l],p=(u>>>4|u<<28)^t[l+1];o=a,a=u,u=o^(b1[d>>>24&63]|w1[d>>>16&63]|S1[d>>>8&63]|_1[d&63]|v1[p>>>24&63]|m1[p>>>16&63]|E1[p>>>8&63]|B1[p&63])}o=a,a=u,u=o}a=a>>>1|a<<31,u=u>>>1|u<<31,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(a>>>4^u)&252645135,u^=o,a^=o<<4,r[0]=a,r[1]=u}function ki(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ae.cipher.createDecipher(r,t.key):n=ae.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ae.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var xr=E((cE,Uf)=>{var Oi=J();Uf.exports=Oi.md=Oi.md||{};Oi.md.algorithms=Oi.md.algorithms||{}});var Mf=E((fE,qf)=>{var Rt=J();xr();ge();var A1=qf.exports=Rt.hmac=Rt.hmac||{};A1.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Rt.md.algorithms)e=Rt.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=Rt.util.createBuffer(o);else if(Rt.util.isArray(o)){var a=o;o=Rt.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=Rt.util.createBuffer(),n=Rt.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var a=o.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var Gr=E(()=>{});var zf=E((pE,Vf)=>{var Ne=J();Mf();xr();ge();var I1=Ne.pkcs5=Ne.pkcs5||{},Pt;Ne.util.isNodejs&&!Ne.options.usePureJavaScript&&(Pt=Gr());Vf.exports=Ne.pbkdf2=I1.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Ne.util.isNodejs&&!Ne.options.usePureJavaScript&&Pt.pbkdf2&&(i===null||typeof i!="object")&&(Pt.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Pt.pbkdf2Sync.length===4?Pt.pbkdf2(t,e,r,n,function(A,L){if(A)return s(A);s(null,L.toString("binary"))}):Pt.pbkdf2(t,e,r,n,i,function(A,L){if(A)return s(A);s(null,L.toString("binary"))}):Pt.pbkdf2Sync.length===4?Pt.pbkdf2Sync(t,e,r,n).toString("binary"):Pt.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ne.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ne.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var u=Math.ceil(n/o),c=n-(u-1)*o,f=Ne.hmac.create();f.start(i,t);var h="",l,d,p;if(!s){for(var y=1;y<=u;++y){f.start(null,null),f.update(e),f.update(Ne.util.int32ToBytes(y)),l=p=f.digest().getBytes();for(var x=2;x<=r;++x)f.start(null,null),f.update(p),d=f.digest().getBytes(),l=Ne.util.xorBytes(l,d,o),p=d;h+=y<u?l:l.substr(0,c)}return h}var y=1,x;function b(){if(y>u)return s(null,h);f.start(null,null),f.update(e),f.update(Ne.util.int32ToBytes(y)),l=p=f.digest().getBytes(),x=2,S()}function S(){if(x<=r)return f.start(null,null),f.update(p),d=f.digest().getBytes(),l=Ne.util.xorBytes(l,d,o),p=d,++x,Ne.util.setImmediate(S);h+=y<u?l:l.substr(0,c),++y,b()}b()}});var jf=E((dE,Gf)=>{var Ki=J();ge();var Hf=Gf.exports=Ki.pem=Ki.pem||{};Hf.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Fi(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Fi(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Fi(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Fi(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Ki.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Hf.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ki.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(i),u=0;s&&u<a.length;){for(var c=a[u].replace(/\s+$/,""),f=u+1;f<a.length;++f){var h=a[f];if(!/\s/.test(h[0]))break;c+=h,u=f}if(s=c.match(n),s){for(var l={name:s[1],values:[]},d=s[2].split(","),p=0;p<d.length;++p)l.values.push(T1(d[p]));if(o.procType)if(!o.contentDomain&&l.name==="Content-Domain")o.contentDomain=d[0]||"";else if(!o.dekInfo&&l.name==="DEK-Info"){if(l.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:d[0],parameters:d[1]||null}}else o.headers.push(l);else{if(l.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(l.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:d[0],type:d[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Fi(t){for(var e=t.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function T1(t){return t.replace(/^\s+/,"")}});var Xf=E((yE,Zf)=>{var xt=J();xr();ge();var Wf=Zf.exports=xt.sha256=xt.sha256||{};xt.md.sha256=xt.md.algorithms.sha256=Wf;Wf.create=function(){$f||R1();var t=null,e=xt.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=xt.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=xt.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),Qf(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=xt.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(No.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Qf(h,r,i);var l=xt.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},n};var No=null,$f=!1,Yf=null;function R1(){No=String.fromCharCode(128),No+=xt.util.fillString(String.fromCharCode(0),64),Yf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],$f=!0}function Qf(t,e,r){for(var n,i,s,o,a,u,c,f,h,l,d,p,y,x,b,S=r.length();S>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(f=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,x=t.h6,b=t.h7,c=0;c<64;++c)o=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),a=x^p&(y^x),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&h|l&(f^h),n=b+o+a+Yf[c]+e[c],i=s+u,b=x,x=y,y=p,p=d+n>>>0,d=l,l=h,h=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+x|0,t.h7=t.h7+b|0,S-=64}}});var eh=E((gE,Jf)=>{var vt=J();ge();var Ui=null;vt.util.isNodejs&&!vt.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ui=Gr());var P1=Jf.exports=vt.prng=vt.prng||{};P1.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,f){if(!f)return e.generateSync(c);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=vt.util.createBuffer();e.key=null,x();function x(b){if(b)return f(b);if(y.length()>=c)return f(null,y.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return vt.util.nextTick(function(){s(x)});var S=h(e.key,e.seed);e.generated+=S.length,y.putBytes(S),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),vt.util.setImmediate(x)}},e.generateSync=function(c){var f=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=vt.util.createBuffer();p.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&o();var y=f(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(f(e.key,h(e.seed))),e.seed=d(f(e.key,e.seed))}return p.getBytes(c)};function s(c){if(e.pools[0].messageLength>=32)return a(),c();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(h,l){if(h)return c(h);e.collect(l),a(),c()})}function o(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var f=1,h=0;h<32;++h)e.reseeds%f==0&&(c.update(e.pools[h].digest().getBytes()),e.pools[h].start()),f=f<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var l=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function u(c){var f=null,h=vt.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(f=function(T){return l.getRandomValues(T)});var d=vt.util.createBuffer();if(f)for(;d.length()<c;){var p=Math.max(1,Math.min(c-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{f(y);for(var x=0;x<y.length;++x)d.putInt32(y[x])}catch(T){if(!(typeof QuotaExceededError!="undefined"&&T instanceof QuotaExceededError))throw T}}if(d.length()<c)for(var b,S,A,L=Math.floor(Math.random()*65536);d.length()<c;){S=16807*(L&65535),b=16807*(L>>16),S+=(b&32767)<<16,S+=b>>15,S=(S&2147483647)+(S>>31),L=S&4294967295;for(var x=0;x<3;++x)A=L>>>(x<<3),A^=Math.floor(Math.random()*256),d.putByte(String.fromCharCode(A&255))}return d.getBytes(c)}return Ui?(e.seedFile=function(c,f){Ui.randomBytes(c,function(h,l){if(h)return f(h);f(null,l.toString())})},e.seedFileSync=function(c){return Ui.randomBytes(c).toString()}):(e.seedFile=function(c,f){try{f(null,u(c))}catch(h){f(h)}},e.seedFileSync=u),e.collect=function(c){for(var f=c.length,h=0;h<f;++h)e.pools[e.pool].update(c.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,f){for(var h="",l=0;l<f;l+=8)h+=String.fromCharCode(c>>l&255);e.collect(h)},e.registerWorker=function(c){if(c===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var f=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){c.postMessage({forge:{prng:{err:d,bytes:p}}})})};c.addEventListener("message",f)}},e}});var In=E((xE,Lo)=>{var Be=J();Do();Xf();eh();ge();(function(){if(Be.random&&Be.random.getBytes){Lo.exports=Be.random;return}(function(t){var e={},r=new Array(4),n=Be.util.createBuffer();e.formatKey=function(h){var l=Be.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),Be.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=Be.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return Be.aes._updateBlock(h,l,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Be.md.sha256;function i(){var h=Be.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=i(),o=null,a=Be.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(o=function(h){return u.getRandomValues(h)}),Be.options.usePureJavaScript||!Be.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch(h){}s.collect(c),c=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!Be.random)Be.random=s;else for(var f in s)Be.random[f]=s[f];Be.random.createInstance=i,Lo.exports=Be.random})(typeof jQuery!="undefined"?jQuery:null)})()});var ih=E((vE,nh)=>{var Fe=J();ge();var ko=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],th=[1,2,3,5],D1=function(t,e){return t<<e&65535|(t&65535)>>16-e},N1=function(t,e){return(t&65535)>>e|t<<16-e&65535};nh.exports=Fe.rc2=Fe.rc2||{};Fe.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Fe.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(ko[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,ko[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,ko[r.at(a+1)^r.at(a+s)]);return r};var rh=function(t,e,r){var n=!1,i=null,s=null,o=null,a,u,c,f,h=[];for(t=Fe.rc2.expandKey(t,e),c=0;c<64;c++)h.push(t.getInt16Le());r?(a=function(p){for(c=0;c<4;c++)p[c]+=h[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=D1(p[c],th[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=h[p[(c+3)%4]&63]}):(a=function(p){for(c=3;c>=0;c--)p[c]=N1(p[c],th[c]),p[c]-=h[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=h[p[(c+3)%4]&63]});var l=function(p){var y=[];for(c=0;c<4;c++){var x=i.getInt16Le();o!==null&&(r?x^=o.getInt16Le():o.putInt16Le(x)),y.push(x&65535)}f=r?0:63;for(var b=0;b<p.length;b++)for(var S=0;S<p[b][0];S++)p[b][1](y);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(y[c]):y[c]^=o.getInt16Le()),s.putInt16Le(y[c])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=Fe.util.createBuffer(p)),n=!1,i=Fe.util.createBuffer(),s=y||new Fe.util.createBuffer,o=p,d.output=s},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)l([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(y&&(n=!0,d.update()),!r&&(y=i.length()===0,y))if(p)y=p(8,s,!r);else{var b=s.length(),S=s.at(b-1);S>b?y=!1:s.truncate(S)}return y}},d};Fe.rc2.startEncrypting=function(t,e,r){var n=Fe.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Fe.rc2.createEncryptionCipher=function(t,e){return rh(t,e,!0)};Fe.rc2.startDecrypting=function(t,e,r){var n=Fe.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Fe.rc2.createDecryptionCipher=function(t,e){return rh(t,e,!1)}});var Vi=E((bE,lh)=>{var Oo=J();lh.exports=Oo.jsbn=Oo.jsbn||{};var Dt,L1=244837814094590,sh=(L1&16777215)==15715070;function B(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}Oo.jsbn.BigInteger=B;function W(){return new B(null)}function k1(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function O1(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var u=this.data[t]&32767,c=this.data[t++]>>15,f=a*u+c*o;u=o*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function oh(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var u=this.data[t]&16383,c=this.data[t++]>>14,f=a*u+c*o;u=o*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(B.prototype.am=oh,Dt=28):sh&&navigator.appName=="Microsoft Internet Explorer"?(B.prototype.am=O1,Dt=30):sh&&navigator.appName!="Netscape"?(B.prototype.am=k1,Dt=26):(B.prototype.am=oh,Dt=28);B.prototype.DB=Dt;B.prototype.DM=(1<<Dt)-1;B.prototype.DV=1<<Dt;var Ko=52;B.prototype.FV=Math.pow(2,Ko);B.prototype.F1=Ko-Dt;B.prototype.F2=2*Dt-Ko;var K1="0123456789abcdefghijklmnopqrstuvwxyz",qi=new Array,jr,je;jr="0".charCodeAt(0);for(je=0;je<=9;++je)qi[jr++]=je;jr="a".charCodeAt(0);for(je=10;je<36;++je)qi[jr++]=je;jr="A".charCodeAt(0);for(je=10;je<36;++je)qi[jr++]=je;function ah(t){return K1.charAt(t)}function uh(t,e){var r=qi[t.charCodeAt(e)];return r??-1}function F1(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function U1(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Yt(t){var e=W();return e.fromInt(t),e}function q1(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:uh(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&B.ZERO.subTo(this,this)}function M1(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function V1(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=ah(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=ah(n));return i?s:"0"}function z1(){var t=W();return B.ZERO.subTo(this,t),t}function H1(){return this.s<0?this.negate():this}function G1(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Mi(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function j1(){return this.t<=0?0:this.DB*(this.t-1)+Mi(this.data[this.t-1]^this.s&this.DM)}function W1(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function $1(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Y1(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function Q1(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function Z1(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function X1(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&B.ZERO.subTo(e,e)}function J1(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function e2(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=W());var s=W(),o=this.s,a=t.s,u=this.DB-Mi(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var h=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,x=y-c,b=e??W();for(s.dlShiftTo(x,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),B.ONE.dlShiftTo(c,b),b.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--x>=0;){var S=r.data[--y]==f?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=s.am(0,S,r,x,0,c))<S)for(s.dlShiftTo(x,b),r.subTo(b,r);r.data[y]<--S;)r.subTo(b,r)}e!=null&&(r.drShiftTo(c,e),o!=a&&B.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&B.ZERO.subTo(r,r)}}}function t2(t){var e=W();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(B.ZERO)>0&&t.subTo(e,e),e}function vr(t){this.m=t}function r2(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function n2(t){return t}function i2(t){t.divRemTo(this.m,null,t)}function s2(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function o2(t,e){t.squareTo(e),this.reduce(e)}vr.prototype.convert=r2;vr.prototype.revert=n2;vr.prototype.reduce=i2;vr.prototype.mulTo=s2;vr.prototype.sqrTo=o2;function a2(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function br(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function u2(t){var e=W();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(B.ZERO)>0&&this.m.subTo(e,e),e}function c2(t){var e=W();return t.copyTo(e),this.reduce(e),e}function f2(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function h2(t,e){t.squareTo(e),this.reduce(e)}function l2(t,e,r){t.multiplyTo(e,r),this.reduce(r)}br.prototype.convert=u2;br.prototype.revert=c2;br.prototype.reduce=f2;br.prototype.mulTo=l2;br.prototype.sqrTo=h2;function p2(){return(this.t>0?this.data[0]&1:this.s)==0}function d2(t,e){if(t>4294967295||t<1)return B.ONE;var r=W(),n=W(),i=e.convert(this),s=Mi(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function y2(t,e){var r;return t<256||e.isEven()?r=new vr(e):r=new br(e),this.exp(t,r)}B.prototype.copyTo=F1;B.prototype.fromInt=U1;B.prototype.fromString=q1;B.prototype.clamp=M1;B.prototype.dlShiftTo=W1;B.prototype.drShiftTo=$1;B.prototype.lShiftTo=Y1;B.prototype.rShiftTo=Q1;B.prototype.subTo=Z1;B.prototype.multiplyTo=X1;B.prototype.squareTo=J1;B.prototype.divRemTo=e2;B.prototype.invDigit=a2;B.prototype.isEven=p2;B.prototype.exp=d2;B.prototype.toString=V1;B.prototype.negate=z1;B.prototype.abs=H1;B.prototype.compareTo=G1;B.prototype.bitLength=j1;B.prototype.mod=t2;B.prototype.modPowInt=y2;B.ZERO=Yt(0);B.ONE=Yt(1);function g2(){var t=W();return this.copyTo(t),t}function x2(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function v2(){return this.t==0?this.s:this.data[0]<<24>>24}function b2(){return this.t==0?this.s:this.data[0]<<16>>16}function m2(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function w2(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function E2(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Yt(r),i=W(),s=W(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function S2(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=uh(t,a);if(u<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&B.ZERO.subTo(this,this)}function B2(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(B.ONE.shiftLeft(t-1),Fo,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(B.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function _2(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function C2(t){return this.compareTo(t)==0}function A2(t){return this.compareTo(t)<0?this:t}function I2(t){return this.compareTo(t)>0?this:t}function T2(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function R2(t,e){return t&e}function P2(t){var e=W();return this.bitwiseTo(t,R2,e),e}function Fo(t,e){return t|e}function D2(t){var e=W();return this.bitwiseTo(t,Fo,e),e}function ch(t,e){return t^e}function N2(t){var e=W();return this.bitwiseTo(t,ch,e),e}function fh(t,e){return t&~e}function L2(t){var e=W();return this.bitwiseTo(t,fh,e),e}function k2(){for(var t=W(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function O2(t){var e=W();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function K2(t){var e=W();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function F2(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function U2(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+F2(this.data[t]);return this.s<0?this.t*this.DB:-1}function q2(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function M2(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=q2(this.data[r]^e);return t}function V2(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function z2(t,e){var r=B.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function H2(t){return this.changeBit(t,Fo)}function G2(t){return this.changeBit(t,fh)}function j2(t){return this.changeBit(t,ch)}function W2(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function $2(t){var e=W();return this.addTo(t,e),e}function Y2(t){var e=W();return this.subTo(t,e),e}function Q2(t){var e=W();return this.multiplyTo(t,e),e}function Z2(t){var e=W();return this.divRemTo(t,e,null),e}function X2(t){var e=W();return this.divRemTo(t,null,e),e}function J2(t){var e=W(),r=W();return this.divRemTo(t,e,r),new Array(e,r)}function ex(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function tx(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Tn(){}function hh(t){return t}function rx(t,e,r){t.multiplyTo(e,r)}function nx(t,e){t.squareTo(e)}Tn.prototype.convert=hh;Tn.prototype.revert=hh;Tn.prototype.mulTo=rx;Tn.prototype.sqrTo=nx;function ix(t){return this.exp(t,new Tn)}function sx(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function ox(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Wr(t){this.r2=W(),this.q3=W(),B.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function ax(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=W();return t.copyTo(e),this.reduce(e),e}function ux(t){return t}function cx(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function fx(t,e){t.squareTo(e),this.reduce(e)}function hx(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Wr.prototype.convert=ax;Wr.prototype.revert=ux;Wr.prototype.reduce=cx;Wr.prototype.mulTo=hx;Wr.prototype.sqrTo=fx;function lx(t,e){var r=t.bitLength(),n,i=Yt(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new vr(e):e.isEven()?s=new Wr(e):s=new br(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=W();for(s.sqrTo(o[1],f);a<=c;)o[a]=W(),s.mulTo(f,o[a-2],o[a]),a+=2}var h=t.t-1,l,d=!0,p=W(),y;for(r=Mi(t.data[h])-1;h>=0;){for(r>=u?l=t.data[h]>>r-u&c:(l=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(l|=t.data[h-1]>>this.DB+r-u)),a=n;(l&1)==0;)l>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),d)o[l].copyTo(i),d=!1;else{for(;a>1;)s.sqrTo(i,p),s.sqrTo(p,i),a-=2;a>0?s.sqrTo(i,p):(y=i,i=p,p=y),s.mulTo(p,o[l],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(i,p),y=i,i=p,p=y,--r<0&&(r=this.DB-1,--h)}return s.revert(i)}function px(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function dx(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function yx(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return B.ZERO;for(var r=t.clone(),n=this.clone(),i=Yt(1),s=Yt(0),o=Yt(0),a=Yt(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(B.ONE)!=0)return B.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var it=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],gx=(1<<26)/it[it.length-1];function xx(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=it[it.length-1]){for(e=0;e<it.length;++e)if(r.data[0]==it[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<it.length;){for(var n=it[e],i=e+1;i<it.length&&n<gx;)n*=it[i++];for(n=r.modInt(n);e<i;)if(n%it[e++]==0)return!1}return r.millerRabin(t)}function vx(t){var e=this.subtract(B.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=bx(),s,o=0;o<t;++o){do s=new B(this.bitLength(),i);while(s.compareTo(B.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(B.ONE)!=0&&a.compareTo(e)!=0){for(var u=1;u++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(B.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function bx(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}B.prototype.chunkSize=m2;B.prototype.toRadix=E2;B.prototype.fromRadix=S2;B.prototype.fromNumber=B2;B.prototype.bitwiseTo=T2;B.prototype.changeBit=z2;B.prototype.addTo=W2;B.prototype.dMultiply=ex;B.prototype.dAddOffset=tx;B.prototype.multiplyLowerTo=sx;B.prototype.multiplyUpperTo=ox;B.prototype.modInt=dx;B.prototype.millerRabin=vx;B.prototype.clone=g2;B.prototype.intValue=x2;B.prototype.byteValue=v2;B.prototype.shortValue=b2;B.prototype.signum=w2;B.prototype.toByteArray=_2;B.prototype.equals=C2;B.prototype.min=A2;B.prototype.max=I2;B.prototype.and=P2;B.prototype.or=D2;B.prototype.xor=N2;B.prototype.andNot=L2;B.prototype.not=k2;B.prototype.shiftLeft=O2;B.prototype.shiftRight=K2;B.prototype.getLowestSetBit=U2;B.prototype.bitCount=M2;B.prototype.testBit=V2;B.prototype.setBit=H2;B.prototype.clearBit=G2;B.prototype.flipBit=j2;B.prototype.add=$2;B.prototype.subtract=Y2;B.prototype.multiply=Q2;B.prototype.divide=Z2;B.prototype.remainder=X2;B.prototype.divideAndRemainder=J2;B.prototype.modPow=lx;B.prototype.modInverse=yx;B.prototype.pow=ix;B.prototype.gcd=px;B.prototype.isProbablePrime=xx});var xh=E((mE,gh)=>{var bt=J();xr();ge();var ph=gh.exports=bt.sha1=bt.sha1||{};bt.md.sha1=bt.md.algorithms.sha1=ph;ph.create=function(){dh||mx();var t=null,e=bt.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=bt.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=bt.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),yh(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=bt.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(Uo.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};yh(h,r,i);var l=bt.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},n};var Uo=null,dh=!1;function mx(){Uo=String.fromCharCode(128),Uo+=bt.util.fillString(String.fromCharCode(0),64),dh=!0}function yh(t,e,r){for(var n,i,s,o,a,u,c,f,h=r.length();h>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,u=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,h-=64}}});var mh=E((wE,bh)=>{var mt=J();ge();In();xh();var vh=bh.exports=mt.pkcs1=mt.pkcs1||{};vh.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=mt.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),u=a-2*s.digestLength-2;if(e.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=u,c}n||(n=""),s.update(n,"raw");for(var f=s.digest(),h="",l=u-e.length,d=0;d<l;d++)h+="\0";var p=f.getBytes()+h+""+e;if(!i)i=mt.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var y=zi(i,a-s.digestLength-1,o),x=mt.util.xorBytes(p,y,p.length),b=zi(x,s.digestLength,o),S=mt.util.xorBytes(i,b,i.length);return"\0"+S+x};vh.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=e.length,x.expectedLength=o,x}if(i===void 0?i=mt.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=e.charAt(0),c=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),h=zi(f,i.digestLength,s),l=mt.util.xorBytes(c,h,c.length),d=zi(l,o-i.digestLength-1,s),p=mt.util.xorBytes(f,d,f.length),y=p.substring(0,i.digestLength),x=u!=="\0",b=0;b<i.digestLength;++b)x|=a.charAt(b)!==y.charAt(b);for(var S=1,A=i.digestLength,L=i.digestLength;L<p.length;L++){var T=p.charCodeAt(L),C=T&1^1,O=S?65534:0;x|=T&O,S=S&C,A+=S}if(x||p.charCodeAt(A)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(A+1)};function zi(t,e,r){r||(r=mt.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var wh=E((EE,qo)=>{var Qt=J();ge();Vi();In();(function(){if(Qt.prime){qo.exports=Qt.prime;return}var t=qo.exports=Qt.prime=Qt.prime||{},e=Qt.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Qt.random,x={nextBytes:function(b){for(var S=y.getBytesSync(b.length),A=0;A<b.length;++A)b[A]=S.charCodeAt(A)}};if(p.name==="PRIMEINC")return s(h,x,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?u(h,l,d,p):o(h,l,d,p)}function o(h,l,d,p){var y=c(h,l),x=0,b=f(y.bitLength());"millerRabinTests"in d&&(b=d.millerRabinTests);var S=10;"maxBlockTime"in d&&(S=d.maxBlockTime),a(y,h,l,x,b,S,p)}function a(h,l,d,p,y,x,b){var S=+new Date;do{if(h.bitLength()>l&&(h=c(l,d)),h.isProbablePrime(y))return b(null,h);h.dAddOffset(r[p++%8],0)}while(x<0||+new Date-S<x);Qt.util.setImmediate(function(){a(h,l,d,p,y,x,b)})}function u(h,l,d,p){if(typeof Worker=="undefined")return o(h,l,d,p);var y=c(h,l),x=d.workers,b=d.workLoad||100,S=b*30/8,A=d.workerScript||"forge/prime.worker.js";if(x===-1)return Qt.util.estimateCores(function(T,C){T&&(C=2),x=C-1,L()});L();function L(){x=Math.max(1,x);for(var T=[],C=0;C<x;++C)T[C]=new Worker(A);for(var O=x,C=0;C<x;++C)T[C].addEventListener("message",ce);var q=!1;function ce(Xe){if(!q){--O;var qe=Xe.data;if(qe.found){for(var Re=0;Re<T.length;++Re)T[Re].terminate();return q=!0,p(null,new e(qe.prime,16))}y.bitLength()>h&&(y=c(h,l));var Br=y.toString(16);Xe.target.postMessage({hex:Br,workLoad:b}),y.dAddOffset(S,0)}}}}function c(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function f(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Gi=E((SE,Ih)=>{var K=J();An();Vi();Ri();mh();wh();In();ge();typeof z=="undefined"&&(z=K.jsbn.BigInteger);var z,Mo=K.util.isNodejs?Gr():null,v=K.asn1,We=K.util;K.pki=K.pki||{};Ih.exports=K.pki.rsa=K.rsa=K.rsa||{};var F=K.pki,wx=[6,4,2,4,2,4,6,2],Ex={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Sx={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Bx={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},_x=K.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Cx=function(t){var e;if(t.algorithm in F.oids)e=F.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=v.oidToDer(e).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),s=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);s.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),s.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var o=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),v.toDer(i).getBytes()},Eh=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(z.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(z.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new z(K.util.bytesToHex(K.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(z.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};F.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Sh(t,e,r)):(i=K.util.createBuffer(),i.putBytes(t));for(var o=new z(i.toHex(),16),a=Eh(o,e,n),u=a.toString(16),c=K.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(K.util.hexToBytes(u)),c.getBytes()};F.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new z(K.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Eh(o,e,r),u=a.toString(16),c=K.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(K.util.hexToBytes(u)),n!==!1?Hi(c.getBytes(),e,r):c.getBytes()};F.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||K.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new z(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};F.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new z(null);r.fromInt(30);for(var n=0,i=function(h,l){return h|l},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,c=u-1;t.pqState===0?(t.num=new z(u,t.rng),t.num.testBit(c)||t.num.bitwiseTo(z.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(Ix(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wx[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(z.ONE),t.q1=t.q.subtract(z.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(z.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:F.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:F.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};F.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!K.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Bh("generateKeyPair"))return Mo.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:F.privateKeyFromPem(c),publicKey:F.publicKeyFromPem(u)})});if(_h("generateKey")&&_h("exportKey"))return We.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ah(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return We.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=F.privateKeyFromAsn1(v.fromDer(K.util.createBuffer(a)));n(null,{privateKey:u,publicKey:F.setRsaPublicKey(u.n,u.e)})}});if(Ch("generateKey")&&Ch("exportKey")){var i=We.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ah(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=We.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var h=f.target.result,l=F.privateKeyFromAsn1(v.fromDer(K.util.createBuffer(h)));n(null,{privateKey:l,publicKey:F.setRsaPublicKey(l.n,l.e)})},c.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(Bh("generateKeyPairSync")){var s=Mo.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:F.privateKeyFromPem(s.privateKey),publicKey:F.publicKeyFromPem(s.publicKey)}}}var o=F.rsa.createKeyPairGenerationState(t,e,r);if(!n)return F.rsa.stepKeyPairGenerationState(o,0),o.keys;Ax(o,r,n)};F.setRsaPublicKey=F.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return Sh(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return K.pkcs1.encode_rsa_oaep(u,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return F.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,u){u=Hi(u,r,!0);var c=v.fromDer(u);return a===c.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,u){return u=Hi(u,r,!0),a===u}});var o=F.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};F.setRsaPrivateKey=F.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var u={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return u.decrypt=function(c,f,h){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var l=F.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Hi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(d,p){return K.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(l,u,!1)},u.sign=function(c,f){var h=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Cx},h=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},h=1);var l=f.encode(c,u.n.bitLength());return F.rsa.encrypt(l,u,h)},u};F.wrapRsaPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(F.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(t).getBytes())])};F.privateKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,Ex,e,r)&&(t=v.fromDer(K.util.createBuffer(e.privateKey))),e={},r=[],!v.validate(t,Sx,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,u,c,f,h;return i=K.util.createBuffer(e.privateKeyModulus).toHex(),s=K.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=K.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=K.util.createBuffer(e.privateKeyPrime1).toHex(),u=K.util.createBuffer(e.privateKeyPrime2).toHex(),c=K.util.createBuffer(e.privateKeyExponent1).toHex(),f=K.util.createBuffer(e.privateKeyExponent2).toHex(),h=K.util.createBuffer(e.privateKeyCoefficient).toHex(),F.setRsaPrivateKey(new z(i,16),new z(s,16),new z(o,16),new z(a,16),new z(u,16),new z(c,16),new z(f,16),new z(h,16))};F.privateKeyToAsn1=F.privateKeyToRSAPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.qInv))])};F.publicKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,_x,e,r)){var n=v.derToOid(e.publicKeyOid);if(n!==F.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!v.validate(t,Bx,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=K.util.createBuffer(e.publicKeyModulus).toHex(),o=K.util.createBuffer(e.publicKeyExponent).toHex();return F.setRsaPublicKey(new z(s,16),new z(o,16))};F.publicKeyToAsn1=F.publicKeyToSubjectPublicKeyInfo=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(F.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[F.publicKeyToRSAPublicKey(t)])])};F.publicKeyToRSAPublicKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,wt(t.e))])};function Sh(t,e,r){var n=K.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<o;++u)n.putByte(a)}else for(;o>0;){for(var c=0,f=K.random.getBytes(o),u=0;u<o;++u)a=f.charCodeAt(u),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(t),n}function Hi(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=K.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(a===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Ax(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,u){if(a)return r(a);if(t.p=u,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,u){K.prime.generateProbablePrime(a,n,u)}function o(a,u){if(a)return r(a);if(t.q=u,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)!==0){t.p=null,i();return}if(t.q.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(z.ONE),t.q1=t.q.subtract(z.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(z.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:F.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:F.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function wt(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=K.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Ix(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Bh(t){return K.util.isNodejs&&typeof Mo[t]=="function"}function _h(t){return typeof We.globalScope!="undefined"&&typeof We.globalScope.crypto=="object"&&typeof We.globalScope.crypto.subtle=="object"&&typeof We.globalScope.crypto.subtle[t]=="function"}function Ch(t){return typeof We.globalScope!="undefined"&&typeof We.globalScope.msCrypto=="object"&&typeof We.globalScope.msCrypto.subtle=="object"&&typeof We.globalScope.msCrypto.subtle[t]=="function"}function Ah(t){for(var e=K.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Lh=E((BE,Nh)=>{var P=J();Do();An();Ff();xr();Ri();zf();jf();In();ih();Gi();ge();typeof Th=="undefined"&&(Th=P.jsbn.BigInteger);var Th,w=P.asn1,U=P.pki=P.pki||{};Nh.exports=U.pbe=P.pbe=P.pbe||{};var mr=U.oids,Tx={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Rx={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Px={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};U.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=P.random.getBytesSync(r.saltSize),i=r.count,s=w.integerToDer(i),o,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,h;switch(r.algorithm){case"aes128":o=16,c=16,f=mr["aes128-CBC"],h=P.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,f=mr["aes192-CBC"],h=P.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,f=mr["aes256-CBC"],h=P.aes.createEncryptionCipher;break;case"des":o=8,c=8,f=mr.desCBC,h=P.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Dh(d),y=P.pkcs5.pbkdf2(e,n,i,o,p),x=P.random.getBytesSync(c),b=h(y);b.start(x),b.update(w.toDer(t)),b.finish(),u=b.output.getBytes();var S=Dx(n,s,o,d);a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(mr.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(mr.pkcs5PBKDF2).getBytes()),S]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(f).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){o=24;var A=new P.util.ByteBuffer(n),y=U.pbe.generatePkcs12Key(e,A,1,i,o),x=U.pbe.generatePkcs12Key(e,A,2,i,o),b=P.des.createEncryptionCipher(y);b.start(x),b.update(w.toDer(t)),b.finish(),u=b.output.getBytes(),a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(mr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,n),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var L=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[a,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,u)]);return L};U.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!w.validate(t,Tx,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=w.derToOid(n.encryptionOid),a=U.pbe.getCipher(o,n.encryptionParams,e),u=P.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=w.fromDer(a.output)),r};U.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(t).getBytes()};return P.pem.encode(r,{maxline:e})};U.encryptedPrivateKeyFromPem=function(t){var e=P.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(e.body)};U.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=U.wrapRsaPrivateKey(U.privateKeyToAsn1(t));return n=U.encryptPrivateKeyInfo(n,e,r),U.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=P.random.getBytesSync(8),a=P.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=P.random.getBytesSync(8),a=P.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=P.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(c);f.start(s),f.update(w.toDer(U.privateKeyToAsn1(t))),f.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:P.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return P.pem.encode(h)};U.decryptRsaPrivateKey=function(t,e){var r=null,n=P.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=P.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=P.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=P.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=P.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=P.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(h){return P.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,o=function(h){return P.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,o=function(h){return P.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=P.util.hexToBytes(n.dekInfo.parameters),u=P.pbe.opensslDeriveBytes(e,a.substr(0,8),s),c=o(u);if(c.start(a),c.update(P.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=U.decryptPrivateKeyInfo(w.fromDer(r),e):r=w.fromDer(r),r!==null&&(r=U.privateKeyFromAsn1(r)),r};U.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in P.md))throw new Error('"sha1" hash algorithm unavailable.');s=P.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new P.util.ByteBuffer,h=new P.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var l=h.length(),d=e.length(),p=new P.util.ByteBuffer;p.fillWithByte(r,c);var y=c*Math.ceil(d/c),x=new P.util.ByteBuffer;for(a=0;a<y;a++)x.putByte(e.at(a%d));var b=c*Math.ceil(l/c),S=new P.util.ByteBuffer;for(a=0;a<b;a++)S.putByte(h.at(a%l));var A=x;A.putBuffer(S);for(var L=Math.ceil(i/u),T=1;T<=L;T++){var C=new P.util.ByteBuffer;C.putBytes(p.bytes()),C.putBytes(A.bytes());for(var O=0;O<n;O++)s.start(),s.update(C.getBytes()),C=s.digest();var q=new P.util.ByteBuffer;for(a=0;a<c;a++)q.putByte(C.at(a%u));var ce=Math.ceil(d/c)+Math.ceil(l/c),Xe=new P.util.ByteBuffer;for(o=0;o<ce;o++){var qe=new P.util.ByteBuffer(A.getBytes(c)),Re=511;for(a=q.length()-1;a>=0;a--)Re=Re>>8,Re+=q.at(a)+qe.at(a),qe.setAt(a,Re&255);Xe.putBuffer(qe)}A=Xe,f.putBuffer(C)}return f.truncate(f.length()-i),f};U.pbe.getCipher=function(t,e,r){switch(t){case U.oids.pkcs5PBES2:return U.pbe.getCipherForPBES2(t,e,r);case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case U.oids["pbewithSHAAnd40BitRC2-CBC"]:return U.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};U.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!w.validate(e,Rx,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=w.derToOid(n.kdfOid),t!==U.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=w.derToOid(n.encOid),t!==U.oids["aes128-CBC"]&&t!==U.oids["aes192-CBC"]&&t!==U.oids["aes256-CBC"]&&t!==U.oids["des-EDE3-CBC"]&&t!==U.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=P.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch(U.oids[t]){case"aes128-CBC":u=16,c=P.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=P.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=P.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=P.des.createDecryptionCipher;break;case"desCBC":u=8,c=P.des.createDecryptionCipher;break}var f=Ph(n.prfOid),h=P.pkcs5.pbkdf2(r,o,a,u,f),l=n.encIv,d=c(h);return d.start(l),d};U.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!w.validate(e,Px,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=P.util.createBuffer(n.salt),a=P.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,f;switch(t){case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=P.des.startDecrypting;break;case U.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(y,x){var b=P.rc2.createDecryptionCipher(y,40);return b.start(x,null),b};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=Ph(n.prfOid),l=U.pbe.generatePkcs12Key(r,o,1,a,u,h);h.start();var d=U.pbe.generatePkcs12Key(r,o,2,a,c,h);return f(l,d)};U.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in P.md))throw new Error('"md5" hash algorithm unavailable.');n=P.md.md5.create()}e===null&&(e="");for(var i=[Rh(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push(Rh(n,i[o-1]+t+e));return i.join("").substr(0,r)};function Rh(t,e){return t.start().update(e).digest().getBytes()}function Ph(t){var e;if(!t)e="hmacWithSHA1";else if(e=U.oids[w.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Dh(e)}function Dh(t){var e=P.md;switch(t){case"hmacWithSHA224":e=P.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Dx(t,e,r,n){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,t),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,P.util.hexToBytes(r.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(U.oids[n]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}});var $r={};_e($r,{concat:()=>Nx});function Nx(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}var Yr=Z(()=>{});var Rn=E(kh=>{"use strict";kh.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var Vo=E((CE,Kh)=>{"use strict";var{concat:Lx}=(Yr(),$r),{fromString:Oh}=(yt(),dt),kx=Rn();function Ox({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:s=32767}={}){let o=kx.get();r*=8;async function a(c,f){let h=o.getRandomValues(new Uint8Array(i)),l=o.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},y=await o.subtle.importKey("raw",Oh(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),x=await o.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),b=await o.subtle.encrypt(d,x,c);return Lx([h,d.iv,new Uint8Array(b)])}async function u(c,f){let h=c.slice(0,i),l=c.slice(i,i+e),d=c.slice(i+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},x=await o.subtle.importKey("raw",Oh(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),b=await o.subtle.deriveKey(y,x,{name:t,length:r},!0,["decrypt"]),S=await o.subtle.decrypt(p,b,d);return new Uint8Array(S)}return{encrypt:a,decrypt:u}}Kh.exports={create:Ox}});var Uh=E((AE,Fh)=>{"use strict";var{base64:Kx}=(fn(),Ir),Fx=Vo();Fh.exports={import:async function(t,e){let r=Kx.decode(t);return await Fx.create().decrypt(r,e)}}});var Qr={};_e(Qr,{equals:()=>Ux});function Ux(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Zr=Z(()=>{});var Hh=E((IE,zh)=>{var ie=J();xr();ge();var Pn=zh.exports=ie.sha512=ie.sha512||{};ie.md.sha512=ie.md.algorithms.sha512=Pn;var qh=ie.sha384=ie.sha512.sha384=ie.sha512.sha384||{};qh.create=function(){return Pn.create("SHA-384")};ie.md.sha384=ie.md.algorithms.sha384=qh;ie.sha512.sha256=ie.sha512.sha256||{create:function(){return Pn.create("SHA-512/256")}};ie.md["sha512/256"]=ie.md.algorithms["sha512/256"]=ie.sha512.sha256;ie.sha512.sha224=ie.sha512.sha224||{create:function(){return Pn.create("SHA-512/224")}};ie.md["sha512/224"]=ie.md.algorithms["sha512/224"]=ie.sha512.sha224;Pn.create=function(t){if(Mh||qx(),typeof t=="undefined"&&(t="SHA-512"),!(t in wr))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=wr[t],r=null,n=ie.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=ie.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=ie.util.encodeUtf8(u));var f=u.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=f[1],f[1]=f[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),Vh(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=ie.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=c&a.blockLength-1;u.putBytes(zo.substr(0,a.blockLength-f));for(var h,l,d=a.fullMessageLength[0]*8,p=0;p<a.fullMessageLength.length-1;++p)h=a.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,u.putInt32(d>>>0),d=h>>>0;u.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);Vh(y,i,u);var x=ie.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var p=0;p<b;++p)x.putInt32(y[p][0]),(p!==b-1||t!=="SHA-512/224")&&x.putInt32(y[p][1]);return x},a};var zo=null,Mh=!1,Ho=null,wr=null;function qx(){zo=String.fromCharCode(128),zo+=ie.util.fillString(String.fromCharCode(0),128),Ho=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],wr={},wr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],wr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],wr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],wr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Mh=!0}function Vh(t,e,r){for(var n,i,s,o,a,u,c,f,h,l,d,p,y,x,b,S,A,L,T,C,O,q,ce,Xe,qe,Re,Br,Wn,ye,ke,k,us,cs,fs,hs,da=r.length();da>=128;){for(ye=0;ye<16;++ye)e[ye][0]=r.getInt32()>>>0,e[ye][1]=r.getInt32()>>>0;for(;ye<80;++ye)us=e[ye-2],ke=us[0],k=us[1],n=((ke>>>19|k<<13)^(k>>>29|ke<<3)^ke>>>6)>>>0,i=((ke<<13|k>>>19)^(k<<3|ke>>>29)^(ke<<26|k>>>6))>>>0,fs=e[ye-15],ke=fs[0],k=fs[1],s=((ke>>>1|k<<31)^(ke>>>8|k<<24)^ke>>>7)>>>0,o=((ke<<31|k>>>1)^(ke<<24|k>>>8)^(ke<<25|k>>>7))>>>0,cs=e[ye-7],hs=e[ye-16],k=i+cs[1]+o+hs[1],e[ye][0]=n+cs[0]+s+hs[0]+(k/4294967296>>>0)>>>0,e[ye][1]=k>>>0;for(y=t[0][0],x=t[0][1],b=t[1][0],S=t[1][1],A=t[2][0],L=t[2][1],T=t[3][0],C=t[3][1],O=t[4][0],q=t[4][1],ce=t[5][0],Xe=t[5][1],qe=t[6][0],Re=t[6][1],Br=t[7][0],Wn=t[7][1],ye=0;ye<80;++ye)c=((O>>>14|q<<18)^(O>>>18|q<<14)^(q>>>9|O<<23))>>>0,f=((O<<18|q>>>14)^(O<<14|q>>>18)^(q<<23|O>>>9))>>>0,h=(qe^O&(ce^qe))>>>0,l=(Re^q&(Xe^Re))>>>0,a=((y>>>28|x<<4)^(x>>>2|y<<30)^(x>>>7|y<<25))>>>0,u=((y<<4|x>>>28)^(x<<30|y>>>2)^(x<<25|y>>>7))>>>0,d=(y&b|A&(y^b))>>>0,p=(x&S|L&(x^S))>>>0,k=Wn+f+l+Ho[ye][1]+e[ye][1],n=Br+c+h+Ho[ye][0]+e[ye][0]+(k/4294967296>>>0)>>>0,i=k>>>0,k=u+p,s=a+d+(k/4294967296>>>0)>>>0,o=k>>>0,Br=qe,Wn=Re,qe=ce,Re=Xe,ce=O,Xe=q,k=C+i,O=T+n+(k/4294967296>>>0)>>>0,q=k>>>0,T=A,C=L,A=b,L=S,b=y,S=x,k=i+o,y=n+s+(k/4294967296>>>0)>>>0,x=k>>>0;k=t[0][1]+x,t[0][0]=t[0][0]+y+(k/4294967296>>>0)>>>0,t[0][1]=k>>>0,k=t[1][1]+S,t[1][0]=t[1][0]+b+(k/4294967296>>>0)>>>0,t[1][1]=k>>>0,k=t[2][1]+L,t[2][0]=t[2][0]+A+(k/4294967296>>>0)>>>0,t[2][1]=k>>>0,k=t[3][1]+C,t[3][0]=t[3][0]+T+(k/4294967296>>>0)>>>0,t[3][1]=k>>>0,k=t[4][1]+q,t[4][0]=t[4][0]+O+(k/4294967296>>>0)>>>0,t[4][1]=k>>>0,k=t[5][1]+Xe,t[5][0]=t[5][0]+ce+(k/4294967296>>>0)>>>0,t[5][1]=k>>>0,k=t[6][1]+Re,t[6][0]=t[6][0]+qe+(k/4294967296>>>0)>>>0,t[6][1]=k>>>0,k=t[7][1]+Wn,t[7][0]=t[7][0]+Br+(k/4294967296>>>0)>>>0,t[7][1]=k>>>0,da-=128}}});var ji=E(Dn=>{"use strict";ge();Vi();var Mx=J(),{fromString:Vx}=(yt(),dt),{toString:Gh}=(ct(),ut),{concat:jh}=(Yr(),$r);Dn.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=jh([new Uint8Array(e-r.length),r])}return Gh(r,"base64url")};Dn.base64urlToBigInteger=t=>{let e=Dn.base64urlToBuffer(t);return new Mx.jsbn.BigInteger(Gh(e,"base16"),16)};Dn.base64urlToBuffer=(t,e)=>{let r=Vx(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=jh([new Uint8Array(e-r.length),r])}return r}});var Yh=E(Nn=>{"use strict";An();Gi();var Zt=J(),{bigIntegerToUintBase64url:Et,base64urlToBigInteger:St}=ji(),{fromString:Wh}=(yt(),dt),{toString:$h}=(ct(),ut);Nn.pkcs1ToJwk=function(t){let e=Zt.asn1.fromDer($h(t,"ascii")),r=Zt.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Et(r.n),e:Et(r.e),d:Et(r.d),p:Et(r.p),q:Et(r.q),dp:Et(r.dP),dq:Et(r.dQ),qi:Et(r.qInv),alg:"RS256",kid:"2011-04-29"}};Nn.jwkToPkcs1=function(t){let e=Zt.pki.privateKeyToAsn1({n:St(t.n),e:St(t.e),d:St(t.d),p:St(t.p),q:St(t.q),dP:St(t.dp),dQ:St(t.dq),qInv:St(t.qi)});return Wh(Zt.asn1.toDer(e).getBytes(),"ascii")};Nn.pkixToJwk=function(t){let e=Zt.asn1.fromDer($h(t,"ascii")),r=Zt.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Et(r.n),e:Et(r.e),alg:"RS256",kid:"2011-04-29"}};Nn.jwkToPkix=function(t){let e=Zt.pki.publicKeyToAsn1({n:St(t.n),e:St(t.e)});return Wh(Zt.asn1.toDer(e).getBytes(),"ascii")}});var Jh=E((PE,Xh)=>{"use strict";Gi();var Qh=J(),{base64urlToBigInteger:zx}=ji();function Zh(t,e){return e.map(r=>zx(t[r]))}function Hx(t){return Qh.pki.setRsaPrivateKey(...Zh(t,["n","e","d","p","q","dp","dq","qi"]))}function Gx(t){return Qh.pki.setRsaPublicKey(...Zh(t,["n","e"]))}Xh.exports={jwk2pub:Gx,jwk2priv:Hx}});var rl=E(Lt=>{"use strict";var Nt=Rn(),jx=_i(),{toString:Wx}=(ct(),ut),{fromString:$x}=(yt(),dt);Lt.utils=Yh();Lt.generateKey=async function(t){let e=await Nt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await el(e);return{privateKey:r[0],publicKey:r[1]}};Lt.unmarshalPrivateKey=async function(t){let r=[await Nt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Yx(t)],n=await el({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};Lt.getRandomValues=jx;Lt.hashAndSign=async function(t,e){let r=await Nt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Nt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,n.byteOffset,n.byteLength)};Lt.hashAndVerify=async function(t,e,r){let n=await Nt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Nt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)};function el(t){return Promise.all([Nt.get().subtle.exportKey("jwk",t.privateKey),Nt.get().subtle.exportKey("jwk",t.publicKey)])}function Yx(t){return Nt.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:Qx,jwk2priv:Zx}=Jh();function tl(t,e,r,n){let i=e?Qx(t):Zx(t),s=Wx(Uint8Array.from(r),"ascii"),o=n(s,i);return $x(o,"ascii")}Lt.encrypt=function(t,e){return tl(t,!0,e,(r,n)=>n.encrypt(r))};Lt.decrypt=function(t,e){return tl(t,!1,e,(r,n)=>n.decrypt(r))}});var Wi=E((NE,nl)=>{"use strict";var{base64:Xx}=(fn(),Ir),Jx=Vo();nl.exports={export:async function(t,e){let n=await Jx.create().encrypt(t,e);return Xx.encode(n)}}});var ul=E((LE,al)=>{"use strict";var{sha256:il}=(or(),qt),sl=Je(),{equals:ol}=(Zr(),Qr),{toString:ev}=(ct(),ut);Hh();var $i=J(),$e=rl(),Yi=Ai(),tv=Wi(),Qi=class{constructor(e){this._key=e}async verify(e,r){return $e.hashAndVerify(this._key,r,e)}marshal(){return $e.utils.jwkToPkix(this._key)}get bytes(){return Yi.PublicKey.encode({Type:Yi.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return $e.encrypt(this._key,e)}equals(e){return ol(this.bytes,e.bytes)}async hash(){let{bytes:e}=await il.digest(this.bytes);return e}},Ln=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return $e.getRandomValues(16)}async sign(e){return $e.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw sl(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Qi(this._publicKey)}decrypt(e){return $e.decrypt(this._key,e)}marshal(){return $e.utils.jwkToPkcs1(this._key)}get bytes(){return Yi.PrivateKey.encode({Type:Yi.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return ol(this.bytes,e.bytes)}async hash(){let{bytes:e}=await il.digest(this.bytes);return e}async id(){let e=await this.public.hash();return ev(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new $i.util.ByteBuffer(this.marshal()),i=$i.asn1.fromDer(n),s=$i.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return $i.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return tv.export(this.bytes,e);throw sl(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function rv(t){let e=$e.utils.pkcs1ToJwk(t),r=await $e.unmarshalPrivateKey(e);return new Ln(r.privateKey,r.publicKey)}function nv(t){let e=$e.utils.pkixToJwk(t);return new Qi(e)}async function iv(t){let e=await $e.unmarshalPrivateKey(t);return new Ln(e.privateKey,e.publicKey)}async function sv(t){let e=await $e.generateKey(t);return new Ln(e.privateKey,e.publicKey)}al.exports={RsaPublicKey:Qi,RsaPrivateKey:Ln,unmarshalRsaPublicKey:nv,unmarshalRsaPrivateKey:rv,generateKeyPair:sv,fromJwk:iv}});var xl=E(se=>{"use strict";var ov=se&&se.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(se,"__esModule",{value:!0});se.utils=se.verify=se.sign=se.getPublicKey=se.SignResult=se.Signature=se.Point=se.ExtendedPoint=se.CURVE=void 0;var av=ov(Gr()),pe={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};se.CURVE=pe;var Le=32,kn=19681161376707505956807079304988542015446066515923890162744021073123829784752n,uv=25063068953384623474111414158702152701244531502492656460079210482610430750235n,cv=54469307008909316920995813868745141605393597292927456921205312896311721017578n,fv=1159843021668779879193775521855586647937357759715417654439879720876111806838n,hv=40440834346308536858101042469323190826248399146238708352240133220865137265952n,te=class{constructor(e,r,n,i){this.x=e,this.y=r,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof ue))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(ue.ZERO)?te.ZERO:new te(e.x,e.y,1n,_(e.x*e.y))}static toAffineBatch(e){let r=pv(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){let r=Wo(e.slice(0,Le)),n=this.calcElligatorRistrettoMap(r),i=Wo(e.slice(Le,Le*2)),s=this.calcElligatorRistrettoMap(i);return n.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=pe,n=_(kn*e*e),i=_((n+1n)*fv),s=-1n,o=_((s-r*n)*_(n+r)),{isValid:a,value:u}=Yo(i,o),c=_(u*e);Jt(c)||(c=_(-c)),a||(u=c),a||(s=n);let f=_(s*(n-1n)*hv-o),h=u*u,l=_((u+u)*o),d=_(f*uv),p=_(1n-h),y=_(1n+h);return new te(_(l*y),_(p*d),_(d*y),_(l*p))}static fromRistrettoBytes(e){let{a:r,d:n}=pe,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=Wo(e);if(!gv(hl(s,Le),e)||Jt(s))throw new Error(i);let o=_(s*s),a=_(1n+r*o),u=_(1n-r*o),c=_(a*a),f=_(u*u),h=_(r*n*c-f),{isValid:l,value:d}=ll(_(h*f)),p=_(d*u),y=_(d*p*h),x=_((s+s)*p);Jt(x)&&(x=_(-x));let b=_(a*y),S=_(x*b);if(!l||Jt(S)||b===0n)throw new Error(i);return new te(x,b,1n,S)}toRistrettoBytes(){let{x:e,y:r,z:n,t:i}=this,s=_(_(n+r)*_(n-r)),o=_(e*r),{value:a}=ll(_(s*o**2n)),u=_(a*s),c=_(a*o),f=_(u*c*i),h;if(Jt(i*f)){let d=_(r*kn),p=_(e*kn);e=d,r=p,h=_(u*cv)}else h=c;Jt(e*f)&&(r=_(-r));let l=_((n-r)*h);return Jt(l)&&(l=_(-l)),hl(l,Le)}equals(e){let r=this,n=e;return _(r.t*n.z)===_(n.t*r.z)}negate(){return new te(_(-this.x),this.y,this.z,_(-this.t))}double(){let e=this.x,r=this.y,n=this.z,{a:i}=pe,s=_(e**2n),o=_(r**2n),a=_(2n*n**2n),u=_(i*s),c=_((e+r)**2n-s-o),f=_(u+o),h=_(f-a),l=_(u-o),d=_(c*h),p=_(f*l),y=_(c*l),x=_(h*f);return new te(d,p,x,y)}add(e){let r=this.x,n=this.y,i=this.z,s=this.t,o=e.x,a=e.y,u=e.z,c=e.t,f=_((n-r)*(a+o)),h=_((n+r)*(a-o)),l=_(h-f);if(l===0n)return this.double();let d=_(i*2n*c),p=_(s*2n*u),y=_(p+d),x=_(h+f),b=_(p-d),S=_(y*l),A=_(x*b),L=_(y*b),T=_(l*x);return new te(S,A,T,L)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=gl(e);if(r===1n)return this;let n=te.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(e){let r=256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(te.BASE)&&(r=ue.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Go.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=te.normalizeZ(i),Go.set(r,i)));let s=te.ZERO,o=te.ZERO,a=256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*u,p=Number(e&c);if(e>>=h,p>u&&(p-=f,e+=1n),p===0){let y=i[d];l%2&&(y=y.negate()),o=o.add(y)}else{let y=i[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return[s,o]}multiply(e,r){let n=gl(e);return te.normalizeZ(this.wNAF(n,r))[0]}toAffine(e=$o(this.z)){let r=_(this.x*e),n=_(this.y*e);return new ue(r,n)}};se.ExtendedPoint=te;te.BASE=new te(pe.Gx,pe.Gy,1n,_(pe.Gx*pe.Gy));te.ZERO=new te(0n,1n,1n,0n);var Go=new WeakMap,ue=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Go.delete(this)}static fromHex(e){let{d:r,P:n}=pe,i=e instanceof Uint8Array?e:Xr(e);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let s=i[31],o=s&~128,a=(s&128)!=0,u=Uint8Array.from(Array.from(i.slice(0,31)).concat(o)),c=Jr(u);if(c>=n)throw new Error("Point.fromHex expects hex <= Fp");let f=_(c*c),h=_(f-1n),l=_(r*f+1n),{isValid:d,value:p}=Yo(h,l);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let y=(p&1n)===1n;return a!==y&&(p=_(-p)),new ue(p,c)}static async fromPrivateKey(e){let r=await yl(e);return ue.BASE.multiply(pl(r))}toRawBytes(){let e=jo(this.y),r=new Uint8Array(Le);for(let i=e.length-2,s=0;s<Le&&i>=0;i-=2,s++)r[s]=fl(e[i]+e[i+1]);let n=this.x&1n?128:0;return r[Le-1]|=n,r}toHex(){return cl(this.toRawBytes())}toX25519(){return _((1n+this.y)*$o(1n-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ue(_(-this.x),this.y)}add(e){return te.fromAffine(this).add(te.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return te.fromAffine(this).multiply(e,this).toAffine()}};se.Point=ue;ue.BASE=new ue(pe.Gx,pe.Gy);ue.ZERO=new ue(0n,1n);var Xt=class{constructor(e,r){this.r=e,this.s=r}static fromHex(e){e=Zo(e);let r=ue.fromHex(e.slice(0,32)),n=Jr(e.slice(32));if(!dl(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Xt(r,n)}toRawBytes(){let e=Xr(jo(this.s)).reverse(),r=new Uint8Array(Le);r.set(e);let n=new Uint8Array(Le*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return cl(this.toRawBytes())}};se.Signature=Xt;se.SignResult=Xt;function lv(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function cl(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function fl(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function Xr(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=fl(t.slice(n,n+2))}return e}function jo(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function hl(t,e=Le){let r=jo(t).padStart(e*2,"0");return Xr(r).reverse()}function Jt(t){return(_(t)&1n)===1n}function Jr(t){let e=0n;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<8n*BigInt(r);return e}function Wo(t){return _(Jr(t)&2n**255n-1n)}function _(t,e=pe.P){let r=t%e;return r>=0n?r:e+r}function $o(t,e=pe.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=_(t,e),n=e,i=0n,s=1n,o=1n,a=0n;for(;r!==0n;){let c=n/r,f=n%r,h=i-o*c,l=s-a*c;n=r,r=f,i=o,s=a,o=h,a=l}if(n!==1n)throw new Error("invert: does not exist");return _(i,e)}function pv(t,e=pe.P){let r=t.length,n=new Array(r),i=1n;for(let s=0;s<r;s++)t[s]!==0n&&(n[s]=i,i=_(i*t[s],e));i=$o(i,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=_(i*t[s],e);t[s]=_(i*n[s],e),i=o}return t}function Bt(t,e){let{P:r}=pe,n=t;for(;e-- >0n;)n*=n,n%=r;return n}function dv(t){let{P:e}=pe,n=t*t%e*t%e,i=Bt(n,2n)*n%e,s=Bt(i,1n)*t%e,o=Bt(s,5n)*s%e,a=Bt(o,10n)*o%e,u=Bt(a,20n)*a%e,c=Bt(u,40n)*u%e,f=Bt(c,80n)*c%e,h=Bt(f,80n)*c%e,l=Bt(h,10n)*o%e;return Bt(l,2n)*t%e}function Yo(t,e){let r=_(e*e*e),n=_(r*r*e),i=_(t*r*dv(t*n)),s=_(e*i*i),o=i,a=_(i*kn),u=s===t,c=s===_(-t),f=s===_(-t*kn);return u&&(i=o),(c||f)&&(i=a),Jt(i)&&(i=_(-i)),{isValid:u||c,value:i}}function ll(t){return Yo(1n,t)}async function Qo(...t){let e=lv(...t),r=await se.utils.sha512(e),n=Jr(r);return _(n,pe.n)}function yv(t){return t.slice(Le)}function pl(t){let e=Le-1,r=t.slice(0,Le);return r[0]&=248,r[e]&=127,r[e]|=64,_(Jr(r),pe.n)}function gv(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Zo(t){return t instanceof Uint8Array?t:Xr(t)}function dl(t){return 0<t&&t<pe.n}var xv=2n**256n-1n;function vv(t){let e,r="Expected 32 bytes of private key";if(typeof t=="bigint"||typeof t=="number"&&Number.isSafeInteger(t)){let n=BigInt(t);if(n<0||n>xv)throw new Error(r);e=Xr(n.toString(16).padStart(Le*2,"0"))}else if(typeof t=="string"){if(t.length!==64)throw new Error(r);e=Xr(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error(r);e=t}else throw new TypeError("Expected valid private key");return e}async function yl(t){return await se.utils.sha512(vv(t))}function gl(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&dl(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}async function bv(t){let e=await ue.fromPrivateKey(t);return typeof t=="string"?e.toHex():e.toRawBytes()}se.getPublicKey=bv;async function mv(t,e){let r=await yl(e),n=pl(r),i=ue.BASE.multiply(n),s=Zo(t),o=await Qo(yv(r),s),a=ue.BASE.multiply(o),u=await Qo(a.toRawBytes(),i.toRawBytes(),s),c=_(o+u*n,pe.n),f=new Xt(a,c);return typeof t=="string"?f.toHex():f.toRawBytes()}se.sign=mv;async function wv(t,e,r){e=Zo(e),r instanceof ue||(r=ue.fromHex(r)),t instanceof Xt||(t=Xt.fromHex(t));let n=await Qo(t.r.toRawBytes(),r.toRawBytes(),e),i=te.fromAffine(r).multiplyUnsafe(n),s=te.BASE.multiply(t.s);return te.fromAffine(t.r).add(i).subtract(s).multiplyUnsafe(8n).equals(te.ZERO)}se.verify=wv;ue.BASE._setWindowSize(8);var er={node:av.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};se.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(t=32)=>{if(er.web)return er.web.getRandomValues(new Uint8Array(t));if(er.node){let{randomBytes:e}=er.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=1024;for(;t--;){let e=se.utils.randomBytes(32),r=Jr(e);if(r>1n&&r<pe.n)return e}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async t=>{if(er.web){let e=await er.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(er.node)return Uint8Array.from(er.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=ue.BASE){let r=e.equals(ue.BASE)?e:new ue(e.x,e.y);return r._setWindowSize(t),r.multiply(1n),r}}});var bl=E(tr=>{"use strict";var On=xl(),Ev=32,Sv=64,Zi=32;tr.publicKeyLength=Ev;tr.privateKeyLength=Sv;tr.generateKey=async function(){let t=On.utils.randomPrivateKey(),e=await On.getPublicKey(t);return{privateKey:vl(t,e),publicKey:e}};tr.generateKeyFromSeed=async function(t){if(t.length!==Zi)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await On.getPublicKey(e);return{privateKey:vl(e,r),publicKey:r}};tr.hashAndSign=function(t,e){let r=t.slice(0,Zi);return On.sign(e,r)};tr.hashAndVerify=function(t,e,r){return On.verify(e,r,t)};function vl(t,e){let r=new Uint8Array(tr.privateKeyLength);for(let n=0;n<Zi;n++)r[n]=t[n],r[Zi+n]=e[n];return r}});var Bl=E((KE,Sl)=>{"use strict";var ml=Je(),{equals:wl}=(Zr(),Qr),{sha256:El}=(or(),qt),{base58btc:Bv}=(Ar(),Cr),{identity:_v}=(ti(),gn),Ie=bl(),Xi=Ai(),Cv=Wi(),Ji=class{constructor(e){this._key=tn(e,Ie.publicKeyLength)}async verify(e,r){return Ie.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return Xi.PublicKey.encode({Type:Xi.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return wl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await El.digest(this.bytes);return e}},en=class{constructor(e,r){this._key=tn(e,Ie.privateKeyLength),this._publicKey=tn(r,Ie.publicKeyLength)}async sign(e){return Ie.hashAndSign(this._key,e)}get public(){return new Ji(this._publicKey)}marshal(){return this._key}get bytes(){return Xi.PrivateKey.encode({Type:Xi.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return wl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await El.digest(this.bytes);return e}async id(){let e=await _v.digest(this.public.bytes);return Bv.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Cv.export(this.bytes,e);throw ml(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function Av(t){if(t.length>Ie.privateKeyLength){t=tn(t,Ie.privateKeyLength+Ie.publicKeyLength);let n=t.slice(0,Ie.privateKeyLength),i=t.slice(Ie.privateKeyLength,t.length);return new en(n,i)}t=tn(t,Ie.privateKeyLength);let e=t.slice(0,Ie.privateKeyLength),r=t.slice(Ie.publicKeyLength);return new en(e,r)}function Iv(t){return t=tn(t,Ie.publicKeyLength),new Ji(t)}async function Tv(){let{privateKey:t,publicKey:e}=await Ie.generateKey();return new en(t,e)}async function Rv(t){let{privateKey:e,publicKey:r}=await Ie.generateKeyFromSeed(t);return new en(e,r)}function tn(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw ml(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}Sl.exports={Ed25519PublicKey:Ji,Ed25519PrivateKey:en,unmarshalEd25519PrivateKey:Av,unmarshalEd25519PublicKey:Iv,generateKeyPair:Tv,generateKeyPairFromSeed:Rv}});var Ul=E(G=>{"use strict";var Pv=G&&G.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(G,"__esModule",{value:!0});G.utils=G.schnorr=G.verify=G.signSync=G.sign=G.getSharedSecret=G.recoverPublicKey=G.getPublicKey=G.SignResult=G.Signature=G.Point=G.CURVE=void 0;var Dv=Pv(Gr()),H=BigInt(0),he=BigInt(1),de=BigInt(2),rn=BigInt(3),Nv=BigInt(8),_l=de**BigInt(256),ee={a:H,b:BigInt(7),P:_l-de**BigInt(32)-BigInt(977),n:_l-BigInt("432420386565659656852420866394968145599"),h:he,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};G.CURVE=ee;function Cl(t){let{a:e,b:r}=ee;return D(t**rn+e*t+r)}var es=ee.a===H,$=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof Q))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new $(e.x,e.y,he)}static toAffineBatch(e){let r=kv(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return $.toAffineBatch(e).map($.fromAffine)}equals(e){let r=this,n=e,i=D(r.z*r.z),s=D(r.z*i),o=D(n.z*n.z),a=D(n.z*o);return D(r.x*o)===D(i*n.x)&&D(r.y*a)===D(s*n.y)}negate(){return new $(this.x,D(-this.y),this.z)}double(){let e=this.x,r=this.y,n=this.z,i=D(e**de),s=D(r**de),o=D(s**de),a=D(de*(D(D((e+s)**de))-i-o)),u=D(rn*i),c=D(u**de),f=D(c-de*a),h=D(u*(a-f)-Nv*o),l=D(de*r*n);return new $(f,h,l)}add(e){if(!(e instanceof $))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z;if(s===H||o===H)return this;if(r===H||n===H)return e;let u=D(i**de),c=D(a**de),f=D(r*c),h=D(s*u),l=D(n*a*c),d=D(D(o*i)*u),p=D(h-f),y=D(d-l);if(p===H)return y===H?this.double():$.ZERO;let x=D(p**de),b=D(p*x),S=D(f*x),A=D(y**de-b-de*S),L=D(y*(S-A)-l*b),T=D(i*a*p);return new $(A,L,T)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=Tl(e);if(!es){let f=$.ZERO,h=this;for(;r>H;)r&he&&(f=f.add(h)),h=h.double(),r>>=he;return f}let{k1neg:n,k1:i,k2neg:s,k2:o}=Pl(r),a=$.ZERO,u=$.ZERO,c=this;for(;i>H||o>H;)i&he&&(a=a.add(c)),o&he&&(u=u.add(c)),c=c.double(),i>>=he,o>>=he;return n&&(a=a.negate()),s&&(u=u.negate()),u=new $(D(u.x*ee.beta),u.y,u.z),a.add(u)}precomputeWindow(e){let r=es?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals($.BASE)&&(r=Q.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Xo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=$.normalizeZ(i),Xo.set(r,i)));let s=$.ZERO,o=$.ZERO,a=es?128/n+1:256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*u,p=Number(e&c);if(e>>=h,p>u&&(p-=f,e+=he),p===0){let y=i[d];l%2&&(y=y.negate()),o=o.add(y)}else{let y=i[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return{p:s,f:o}}multiply(e,r){let n=Tl(e),i,s;if(es){let{k1neg:o,k1:a,k2neg:u,k2:c}=Pl(n),{p:f,f:h}=this.wNAF(a,r),{p:l,f:d}=this.wNAF(c,r);o&&(f=f.negate()),u&&(l=l.negate()),l=new $(D(l.x*ee.beta),l.y,l.z),i=f.add(l),s=h.add(d)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return $.normalizeZ([i,s])[0]}toAffine(e=Un(this.z)){let r=e**de,n=D(this.x*r),i=D(this.y*r*e);return new Q(n,i)}};$.BASE=new $(ee.Gx,ee.Gy,he);$.ZERO=new $(H,he,H);var Xo=new WeakMap,Q=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Xo.delete(this)}static fromCompressedHex(e){let r=e.length===32,n=Ye(r?e:e.slice(1)),i=Cl(n),s=Lv(i),o=(s&he)===he;r?o&&(s=D(-s)):(e[0]&1)==1!==o&&(s=D(-s));let a=new Q(n,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=Ye(e.slice(1,33)),n=Ye(e.slice(33)),i=new Q(r,n);return i.assertValidity(),i}static fromHex(e){let r=ns(e),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return Q.BASE.multiply(sn(e))}static fromSignature(e,r,n){let i=e instanceof Uint8Array?Ye(e):Ot(e),s=Ll(r),{r:o,s:a}=s;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let u=2+(n&1),c=Q.fromHex(`0${u}${rr(o)}`),f=$.fromAffine(c).multiplyUnsafe(a),h=$.BASE.multiply(i),l=Un(o,ee.n),p=f.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(e=!1){return nr(this.toHex(e))}toHex(e=!1){let r=rr(this.x);return e?`${this.y&he?"03":"02"}${r}`:`04${r}${rr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{P:r}=ee,{x:n,y:i}=this;if(n===H||i===H||n>=r||i>=r)throw new Error(e);let s=D(i*i),o=Cl(n);if((s-o)%r!==H)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Q(this.x,D(-this.y))}double(){return $.fromAffine(this).double().toAffine()}add(e){return $.fromAffine(this).add($.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return $.fromAffine(this).multiply(e,this).toAffine()}};G.Point=Q;Q.BASE=new Q(ee.Gx,ee.Gy);Q.ZERO=new Q(H,H);function Al(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}var kt=class{constructor(e,r){this.r=e,this.s=r}static fromCompact(e){if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=e instanceof Uint8Array?ts(e):e;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new kt(Ot(r.slice(0,64)),Ot(r.slice(64,128)));return n.assertValidity(),n}static fromDER(e){let r="Signature.fromDER";if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=e instanceof Uint8Array?ts(e):e,i=Fn(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let s=Fn(n.slice(6,8)),o=8+s,a=n.slice(8,o);if(a.startsWith("00")&&Fn(a.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let u=Ot(a);if(n.slice(o,o+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let f=Fn(n.slice(o+2,o+4)),h=i-f-s-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(f>i-s-4)throw new Error(`${r}: Invalid s`);let l=o+4,d=n.slice(l,l+f);if(d.startsWith("00")&&Fn(d.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=Ot(d),y=new kt(u,p);return y.assertValidity(),y}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!nn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!nn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(e=!1){return nr(this.toDERHex(e))}toDERHex(e=!1){let r=Al(Kn(this.s));if(e)return r;let n=Al(Kn(this.r)),i=Kn(n.length/2),s=Kn(r.length/2);return`30${Kn(n.length/2+r.length/2+4)}02${i}${n}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return nr(this.toCompactHex())}toCompactHex(){return rr(this.r)+rr(this.s)}};G.Signature=kt;G.SignResult=kt;function Il(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function ts(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function rr(t){return t.toString(16).padStart(64,"0")}function rs(t){return nr(rr(t))}function Kn(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Ot(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function nr(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function ns(t){return t instanceof Uint8Array?t:nr(t)}function Ye(t){return Ot(ts(t))}function Fn(t){return Number.parseInt(t,16)*2}function Tl(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&nn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function D(t,e=ee.P){let r=t%e;return r>=0?r:e+r}function Qe(t,e){let{P:r}=ee,n=t;for(;e-- >H;)n*=n,n%=r;return n}function Lv(t){let{P:e}=ee,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),u=t*t*t%e,c=u*u*t%e,f=Qe(c,rn)*c%e,h=Qe(f,rn)*c%e,l=Qe(h,de)*u%e,d=Qe(l,n)*l%e,p=Qe(d,i)*d%e,y=Qe(p,o)*p%e,x=Qe(y,a)*y%e,b=Qe(x,o)*p%e,S=Qe(b,rn)*c%e,A=Qe(S,s)*d%e,L=Qe(A,r)*u%e;return Qe(L,de)}function Un(t,e=ee.P){if(t===H||e<=H)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),n=e,i=H,s=he,o=he,a=H;for(;r!==H;){let c=n/r,f=n%r,h=i-o*c,l=s-a*c;n=r,r=f,i=o,s=a,o=h,a=l}if(n!==he)throw new Error("invert: does not exist");return D(i,e)}function kv(t,e=ee.P){let r=t.length,n=new Array(r),i=he;for(let s=0;s<r;s++)t[s]!==H&&(n[s]=i,i=D(i*t[s],e));i=Un(i,e);for(let s=r-1;s>=0;s--){if(t[s]===H)continue;let o=D(i*t[s],e);t[s]=D(i*n[s],e),i=o}return t}var Rl=(t,e)=>(t+e/de)/e,is=de**BigInt(128);function Pl(t){let{n:e}=ee,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-he*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=Rl(s*t,e),a=Rl(-n*t,e),u=D(t-o*r-a*i,e),c=D(-o*n-a*s,e),f=u>is,h=c>is;if(f&&(u=e-u),h&&(c=e-c),u>is||c>is)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:f,k1:u,k2neg:h,k2:c}}function Ov(t){typeof t!="string"&&(t=ts(t));let e=Ot(t||"0"),n=t.length/2*8-256;return n>0&&(e=e>>BigInt(n)),e>=ee.n&&(e-=ee.n),e}function Dl(t,e){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let r=typeof t=="string"?Ot(t):Ye(t),n=rs(r),i=Ye(n),s=rs(e),o=new Uint8Array(32).fill(1),a=new Uint8Array(32).fill(0),u=Uint8Array.from([0]),c=Uint8Array.from([1]);return{h1:n,h1n:i,x:s,v:o,k:a,b0:u,b1:c}}async function Kv(t,e){let r=sn(e),{h1:n,h1n:i,x:s,v:o,k:a,b0:u,b1:c}=Dl(t,r),f=G.utils.hmacSha256;a=await f(a,o,u,s,n),o=await f(a,o),a=await f(a,o,c,s,n),o=await f(a,o);for(let h=0;h<1e3;h++){o=await f(a,o);let l=Nl(o,i,r);if(l)return l;a=await f(a,o,u),o=await f(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function Fv(t,e){let r=sn(e),{h1:n,h1n:i,x:s,v:o,k:a,b0:u,b1:c}=Dl(t,r),f=G.utils.hmacSha256Sync;if(!f)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(a=f(a,o,u,s,n),a instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");o=f(a,o),a=f(a,o,c,s,n),o=f(a,o);for(let h=0;h<1e3;h++){o=f(a,o);let l=Nl(o,i,r);if(l)return l;a=f(a,o,u),o=f(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function nn(t){return 0<t&&t<ee.n}function Nl(t,e,r){let n=Ye(t);if(!nn(n))return;let i=ee.n,s=Q.BASE.multiply(n),o=D(s.x,i),a=D(Un(n,i)*(e+o*r),i);if(!(o===H||a===H))return[s,o,a]}function sn(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=Ot(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Ye(t)}else throw new TypeError("Expected valid private key");if(!nn(e))throw new Error("Expected private key: 0 < key < n");return e}function Jo(t){return t instanceof Q?(t.assertValidity(),t):Q.fromHex(t)}function Ll(t){return t instanceof kt?(t.assertValidity(),t):kt.fromDER(t)}function Uv(t,e=!1){let r=Q.fromPrivateKey(t);return typeof t=="string"?r.toHex(e):r.toRawBytes(e)}G.getPublicKey=Uv;function qv(t,e,r){let n=Q.fromSignature(t,e,r);return typeof t=="string"?n.toHex():n.toRawBytes()}G.recoverPublicKey=qv;function kl(t){let e=t instanceof Uint8Array,r=typeof t=="string",n=(e||r)&&t.length;return e?n===33||n===65:r?n===66||n===130:t instanceof Q}function Mv(t,e,r=!1){if(kl(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!kl(e))throw new TypeError("getSharedSecret: second arg must be public key");let n=Jo(e);n.assertValidity();let i=n.multiply(sn(t));return typeof t=="string"?i.toHex(r):i.toRawBytes(r)}G.getSharedSecret=Mv;function Ol(t,e,r=!1){let[n,i,s]=t,{canonical:o,der:a,recovered:u}=e,c=(n.x===i?0:2)|Number(n.y&he),f=s,h=ee.n>>he;s>h&&o&&(f=ee.n-s,c^=1);let l=new kt(i,f);l.assertValidity();let d=a===!1?l.toCompactHex():l.toDERHex(),p=r?d:nr(d);return u?[p,c]:p}async function Vv(t,e,r={}){return Ol(await Kv(t,e),r,typeof t=="string")}G.sign=Vv;function zv(t,e,r={}){return Ol(Fv(t,e),r,typeof t=="string")}G.signSync=zv;function Hv(t,e,r){let{n}=ee,i;try{i=Ll(t)}catch(x){return!1}let{r:s,s:o}=i,a=Ov(e);if(a===H)return!1;let u=$.fromAffine(Jo(r)),c=Un(o,n),f=D(a*c,n),h=D(s*c,n),l=$.BASE.multiply(f),d=u.multiplyUnsafe(h),p=l.add(d).toAffine();return D(p.x,n)===s}G.verify=Hv;async function ea(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),n=await G.utils.sha256(r),i=await G.utils.sha256(Il(n,n,...e));return Ye(i)}async function Kl(t,e,r){let n=rs(t),i=await ea("BIP0340/challenge",n,e.toRawX(),r);return D(i,ee.n)}function ta(t){return D(t.y,de)===H}var Er=class{constructor(e,r){if(this.r=e,this.s=r,e<=H||r<=H||e>=ee.P||r>=ee.n)throw new Error("Invalid signature")}static fromHex(e){let r=ns(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Ye(r.slice(0,32)),i=Ye(r.slice(32));return new Er(n,i)}toHex(){return rr(this.r)+rr(this.s)}toRawBytes(){return nr(this.toHex())}};function Gv(t){let e=Q.fromPrivateKey(t);return typeof t=="string"?e.toHexX():e.toRawX()}async function jv(t,e,r=G.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);e||(e=H);let{n}=ee,i=ns(t),s=sn(e),o=ns(r);if(o.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let a=Q.fromPrivateKey(s),u=ta(a)?s:n-s,c=await ea("BIP0340/aux",o),f=u^c,h=await ea("BIP0340/nonce",rs(f),a.toRawX(),i),l=D(h,n);if(l===H)throw new Error("sign: Creation of signature failed. k is zero");let d=Q.fromPrivateKey(l),p=ta(d)?l:n-l,y=await Kl(d.x,a,i),x=new Er(d.x,D(p+y*u,n));if(!await Fl(x.toRawBytes(),i,a.toRawX()))throw new Error("sign: Invalid signature produced");return typeof t=="string"?x.toHex():x.toRawBytes()}async function Fl(t,e,r){let n=t instanceof Er?t:Er.fromHex(t),i=typeof e=="string"?nr(e):e,s=Jo(r),o=await Kl(n.r,s,i),a=Q.fromPrivateKey(n.s),u=s.multiply(o),c=a.subtract(u);return!(c.equals(Q.BASE)||!ta(c)||c.x!==n.r)}G.schnorr={Signature:Er,getPublicKey:Gv,sign:jv,verify:Fl};Q.BASE._setWindowSize(8);var Ve={node:Dv.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};G.utils={isValidPrivateKey(t){try{return sn(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(Ve.web)return Ve.web.getRandomValues(new Uint8Array(t));if(Ve.node){let{randomBytes:e}=Ve.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=G.utils.randomBytes(32),r=Ye(e);if(nn(r)&&r!==he)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async t=>{if(Ve.web){let e=await Ve.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(Ve.node){let{createHash:e}=Ve.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Ve.web){let r=await Ve.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Il(...e),i=await Ve.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Ve.node){let{createHmac:r}=Ve.node,n=r("sha256",t);for(let i of e)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=Q.BASE){let r=e===Q.BASE?e:new Q(e.x,e.y);return r._setWindowSize(t),r.multiply(rn),r}}});var Vl=E((UE,Ml)=>{"use strict";var qn=Je(),ir=Ul(),{sha256:ql}=(or(),qt);Ml.exports=()=>{let t=32;function e(){return ir.utils.randomPrivateKey()}async function r(c,f){let{digest:h}=await ql.digest(f);try{return await ir.sign(h,c)}catch(l){throw qn(l,"ERR_INVALID_INPUT")}}async function n(c,f,h){try{let{digest:l}=await ql.digest(h);return ir.verify(f,l,c)}catch(l){throw qn(l,"ERR_INVALID_INPUT")}}function i(c){return ir.Point.fromHex(c).toRawBytes(!0)}function s(c){return ir.Point.fromHex(c).toRawBytes(!1)}function o(c){try{ir.getPublicKey(c,!0)}catch(f){throw qn(f,"ERR_INVALID_PRIVATE_KEY")}}function a(c){try{ir.Point.fromHex(c)}catch(f){throw qn(f,"ERR_INVALID_PUBLIC_KEY")}}function u(c){try{return ir.getPublicKey(c,!0)}catch(f){throw qn(f,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:s,validatePrivateKey:o,validatePublicKey:a,computePublicKey:u}}});var jl=E((qE,Gl)=>{"use strict";var{sha256:zl}=(or(),qt),Wv=Je(),{equals:Hl}=(Zr(),Qr),{toString:$v}=(ct(),ut),Yv=Wi();Gl.exports=(t,e,r)=>{r=r||Vl()();class n{constructor(c){r.validatePublicKey(c),this._key=c}verify(c,f){return r.hashAndVerify(this._key,f,c)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return Hl(this.bytes,c.bytes)}async hash(){let{bytes:c}=await zl.digest(this.bytes);return c}}class i{constructor(c,f){this._key=c,this._publicKey=f||r.computePublicKey(c),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(c){return r.hashAndSign(this._key,c)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return Hl(this.bytes,c.bytes)}async hash(){let{bytes:c}=await zl.digest(this.bytes);return c}async id(){let c=await this.public.hash();return $v(c,"base58btc")}async export(c,f="libp2p-key"){if(f==="libp2p-key")return Yv.export(this.bytes,c);throw Wv(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(u){return new i(u)}function o(u){return new n(u)}async function a(){let u=await r.generateKey();return new i(u)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var $l=E((ME,Wl)=>{"use strict";Wl.exports={SHA1:20,SHA256:32,SHA512:64}});var Zl=E(Ql=>{"use strict";var Yl=Rn(),Qv=$l(),Zv={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},Xv=async(t,e)=>{let r=await Yl.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};Ql.create=async function(t,e){let r=Zv[t],n=await Yl.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return Xv(n,i)},length:Qv[t]}}});var rp=E((zE,tp)=>{"use strict";var Xl=Je(),{concat:Jl}=(Yr(),$r),{fromString:Jv}=(yt(),dt),eb=Zl(),ep={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};tp.exports=async(t,e,r)=>{let n=ep[t];if(!n){let S=Object.keys(ep).join(" / ");throw Xl(new Error(`unknown cipher type '${t}'. Must be ${S}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw Xl(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,s=n.ivSize,o=20,a=Jv("key expansion"),u=2*(s+i+o),c=await eb.create(e,r),f=await c.digest(a),h=[],l=0;for(;l<u;){let S=await c.digest(Jl([f,a])),A=S.length;l+A>u&&(A=u-l),h.push(S),l+=A,f=await c.digest(f)}let d=u/2,p=Jl(h),y=p.slice(0,d),x=p.slice(d,u),b=S=>({iv:S.slice(0,s),cipherKey:S.slice(s,s+i),macKey:S.slice(s+i)});return{k1:b(y),k2:b(x)}}});var ip=E((HE,np)=>{"use strict";var tb=Je();np.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw tb(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var fp=E(cp=>{"use strict";var rb=Je(),Mn=Rn(),{base64urlToBuffer:sp}=ji(),nb=ip(),{toString:ra}=(ct(),ut),{concat:ib}=(Yr(),$r),{equals:sb}=(Zr(),Qr),op={"P-256":256,"P-384":384,"P-521":521};cp.generateEphmeralKeyPair=async function(t){nb(Object.keys(op),t);let e=await Mn.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(i,s)=>{let o;s?o=await Mn.get().subtle.importKey("jwk",ab(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await Mn.get().subtle.importKey("jwk",up(t,i),{name:"ECDH",namedCurve:t},!1,[]),o],u=await Mn.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],op[t]);return new Uint8Array(u,u.byteOffset,u.byteLength)},n=await Mn.get().subtle.exportKey("jwk",e.publicKey);return{key:ob(n),genSharedKey:r}};var ap={"P-256":32,"P-384":48,"P-521":66};function ob(t){let e=ap[t.crv];return ib([Uint8Array.from([4]),sp(t.x,e),sp(t.y,e)],1+e*2)}function up(t,e){let r=ap[t];if(sb(!e.slice(0,1),Uint8Array.from([4])))throw rb(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:ra(e.slice(1,r+1),"base64url"),y:ra(e.slice(1+r),"base64url"),ext:!0}}var ab=(t,e)=>({...up(t,e.public),d:ra(e.private,"base64url")})});var lp=E((jE,hp)=>{"use strict";var ub=fp();hp.exports=async t=>ub.generateEphmeralKeyPair(t)});var yp=E((WE,dp)=>{"use strict";var _t=Ai();An();Lh();var na=J(),Vn=Je(),{fromString:cb}=(yt(),dt),fb=Uh(),Ze={rsa:ul(),ed25519:Bl(),secp256k1:jl()(_t,_i())},ss={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function on(t){let e=Ze[t.toLowerCase()];if(!e){let r=Object.keys(Ze).join(" / ");throw Vn(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var hb=async(t,e)=>on(t).generateKeyPair(e),lb=async(t,e,r)=>{let n=on(t);if(t.toLowerCase()!=="ed25519")throw Vn(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},pb=t=>{let e=_t.PublicKey.decode(t),r=e.Data;switch(e.Type){case _t.KeyType.RSA:return Ze.rsa.unmarshalRsaPublicKey(r);case _t.KeyType.Ed25519:return Ze.ed25519.unmarshalEd25519PublicKey(r);case _t.KeyType.Secp256k1:if(Ze.secp256k1)return Ze.secp256k1.unmarshalSecp256k1PublicKey(r);throw Vn(new Error(ss.message),ss.code);default:on(e.Type)}},db=(t,e)=>(e=(e||"rsa").toLowerCase(),on(e),t.bytes),pp=async t=>{let e=_t.PrivateKey.decode(t),r=e.Data;switch(e.Type){case _t.KeyType.RSA:return Ze.rsa.unmarshalRsaPrivateKey(r);case _t.KeyType.Ed25519:return Ze.ed25519.unmarshalEd25519PrivateKey(r);case _t.KeyType.Secp256k1:if(Ze.secp256k1)return Ze.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Vn(new Error(ss.message),ss.code);default:on(e.Type)}},yb=(t,e)=>(e=(e||"rsa").toLowerCase(),on(e),t.bytes),gb=async(t,e)=>{try{let i=await fb.import(t,e);return pp(i)}catch(i){}let r=na.pki.decryptRsaPrivateKey(t,e);if(r===null)throw Vn(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=na.asn1.toDer(na.pki.privateKeyToAsn1(r));return n=cb(n.getBytes(),"ascii"),Ze.rsa.unmarshalRsaPrivateKey(n)};dp.exports={supportedKeys:Ze,keysPBM:_t,keyStretcher:rp(),generateEphemeralKeyPair:lp(),generateKeyPair:hb,generateKeyPairFromSeed:lb,unmarshalPublicKey:pb,marshalPublicKey:db,unmarshalPrivateKey:pp,marshalPrivateKey:yb,import:gb}});var gp=E(($E,ia)=>{"use strict";function xb(t,{className:e,symbolName:r}){let n=Symbol.for(r),i={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=s=>!!(s&&s[n]),i}function vb(t,{className:e,symbolName:r,withoutNew:n}){let i=Symbol.for(r),s={[e]:function(...o){if(n&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[i]&&Object.defineProperty(a,i,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[i]),s}ia.exports=xb;ia.exports.proto=vb});var bp=E((YE,vp)=>{"use strict";var an=xi(),xp=an.Reader,bb=an.Writer,be=an.util,zn=an.roots["libp2p-peer-id"]||(an.roots["libp2p-peer-id"]={});zn.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.id=be.newBuffer([]),t.prototype.pubKey=be.newBuffer([]),t.prototype.privKey=be.newBuffer([]),t.encode=function(r,n){return n||(n=bb.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},t.decode=function(r,n){r instanceof xp||(r=xp.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new zn.PeerIdProto;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw be.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof zn.PeerIdProto)return r;var n=new zn.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?be.base64.decode(r.id,n.id=be.newBuffer(be.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?be.base64.decode(r.pubKey,n.pubKey=be.newBuffer(be.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?be.base64.decode(r.privKey,n.privKey=be.newBuffer(be.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=be.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=be.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=be.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?be.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?be.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?be.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,an.util.toJSONOptions)},t}();vp.exports=zn});var ua=E((Te,Ap)=>{"use strict";var{CID:sa}=(Ss(),Za),mb=(cn(),un),wb=(bs(),Zn),Eb=(Ar(),Cr),Sb=(fn(),Ir),{base58btc:oa}=(Ar(),Cr),{base32:Bb}=(cn(),un),{base16:mp}=(vs(),Qn),Hn=(dn(),Jn),Ct=yp(),_b=gp(),{PeerIdProto:wp}=bp(),{equals:Sr}=(Zr(),Qr),{fromString:Gn}=(yt(),dt),{toString:Cb}=(ct(),ut),{identity:os}=(ti(),gn),Ep={...mb,...wb,...Eb,...Sb},Ab=Object.keys(Ep).reduce((t,e)=>t.or(Ep[e]),Bb.decoder),Ib=112,Sp=114,Bp=class{constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Sr(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=oa.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=Hn.decode(this.id);e.code===os.code&&(this._pubKey=Ct.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Ct.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Ct.marshalPrivateKey(this.privKey)}marshal(e){return wp.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:Cp(this.marshalPrivKey()),pubKey:Cp(this.marshalPubKey())}}toHexString(){return mp.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=sa.createV1(Sp,Hn.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return Sr(this.id,e);if(e.id)return Sr(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Sr(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(Hn.decode(this.id).code===os.code)return!0}catch(e){}return!1}},At=_b(Bp,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});Te=Ap.exports=At;var jn=t=>t.bytes.length<=42?Hn.create(os.code,t.bytes).bytes:t.hash(),aa=async(t,e)=>{let r=await jn(e);return new At(r,t,e)};Te.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Ct.generateKeyPair(t.keyType,t.bits);return aa(e,e.public)};Te.createFromHexString=t=>new At(mp.decode("f"+t));Te.createFromBytes=t=>{try{let e=sa.decode(t);if(!_p(e))throw new Error("Supplied PeerID CID is invalid");return Te.createFromCID(e)}catch{if(Hn.decode(t).code!==os.code)throw new Error("Supplied PeerID CID is invalid");return new At(t)}};Te.createFromB58String=t=>Te.createFromBytes(oa.decode("z"+t));var _p=t=>t.code===Sp||t.code===Ib;Te.createFromCID=t=>{if(t=sa.asCID(t),!t||!_p(t))throw new Error("Supplied PeerID CID is invalid");return new At(t.multihash.bytes)};Te.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=Gn(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Ct.unmarshalPublicKey(e);return aa(void 0,r)};Te.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=Gn(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Ct.unmarshalPrivateKey(t);return aa(e,e.public)};Te.createFromJSON=async t=>{let e=oa.decode("z"+t.id),r=t.privKey&&Gn(t.privKey,"base64pad"),n=t.pubKey&&Gn(t.pubKey,"base64pad"),i=n&&await Ct.unmarshalPublicKey(n);if(!r)return new At(e,void 0,i);let s=await Ct.unmarshalPrivateKey(r),o=await jn(s.public),a;if(i&&(a=await jn(i)),i&&!Sr(o,a))throw new Error("Public and private key do not match");if(e&&!Sr(o,e))throw new Error("Id and private key do not match");return new At(e,s,i)};Te.createFromProtobuf=async t=>{typeof t=="string"&&(t=Gn(t,"base16"));let{id:e,privKey:r,pubKey:n}=wp.decode(t);r=r?await Ct.unmarshalPrivateKey(r):!1,n=n?await Ct.unmarshalPublicKey(n):!1;let i,s;if(r&&(s=await jn(r.public)),n&&(i=await jn(n)),r){if(n&&!Sr(s,i))throw new Error("Public and private key do not match");return new At(s,r,r.public)}if(n)return new At(i,void 0,n);if(e)return new At(e);throw new Error("Protobuf did not contain any usable key material")};Te.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),Te.createFromBytes(Ab.decode(t)));Te.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function Cp(t){if(t)return Cb(t,"base64pad")}});var ca=E((QE,Rp)=>{"use strict";var Tb=_i(),{toString:Rb}=(ct(),ut),{fromString:Ip}=(yt(),dt),Tp=ua(),{sha256:Pb}=(or(),qt),Db=()=>Tb(8),Nb=(t,e)=>{let r;t instanceof Uint8Array?r=Tp.createFromBytes(t).id:r=Tp.parse(t).id;let n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n},Lb=t=>Pb.encode(t),kb=(t,e)=>{let r;Array.isArray(e)?r=n=>e.indexOf(n)>-1:r=n=>e.has(n);for(let n of t)if(r(n))return!0;return!1},Ob=t=>Array.isArray(t)?t:[t],Kb=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=Rb(t.from,"base58btc")),e&&(r.receivedFrom=e),r},Fb=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=Ip(t.from,"base58btc")),typeof t.data=="string"&&(e.data=Ip(t.data)),e};Rp.exports={randomSeqno:Db,msgId:Nb,noSignMsgId:Lb,anyMatch:kb,ensureArray:Ob,normalizeInRpcMessage:Kb,normalizeOutRpcMessage:Fb}});var kp=E((ZE,Lp)=>{"use strict";var fa=ua(),{RPC:Pp}=Qs(),{concat:Dp}=(Yr(),$r),{fromString:Ub}=(yt(),dt),ha=Ub("libp2p-pubsub:"),{normalizeOutRpcMessage:qb}=ca();async function Mb(t,e){let r=Dp([ha,Pp.Message.encode(qb(e)).finish()]),n=await t.privKey.sign(r);return{...e,signature:n,key:t.pubKey.bytes}}async function Vb(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=Dp([ha,Pp.Message.encode({...t,from:fa.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await Np(t)).verify(e,t.signature)}async function Np(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=fa.createFromB58String(t.from);if(t.key){let r=await fa.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}Lp.exports={messagePublicKey:Np,signMessage:Mb,SignPrefix:ha,verifySignature:Vb}});var la=E((XE,Fp)=>{"use strict";var Op=vn(),{EventEmitter:zb}=Is(),Ue=Je(),{pipe:Hb}=Rs(),{default:Gb}=P0(),jb=V0(),{codes:st}=H0(),{RPC:Kp}=Qs(),Wb=hf(),{SignaturePolicy:Kt}=pf(),sr=ca(),{signMessage:$b,verifySignature:Yb}=kp(),as=class extends zb{constructor({debugName:e,multicodecs:r,libp2p:n,globalSignaturePolicy:i=Kt.StrictSign,canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!n)throw new Error("libp2p is required");super();if(this.log=Object.assign(Op(e),{err:Op(`${e}:error`)}),this.multicodecs=sr.ensureArray(r),this._libp2p=n,this.registrar=n.registrar,this.peerId=n.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!Kt[i])throw Ue(new Error("Invalid global signature policy"),st.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=i,this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new Gb({concurrency:a}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new jb({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(e),this.log("started"),this.started=!0}async stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:n}){let i=n.remotePeer,s=i.toB58String(),o=this._addPeer(i,e),a=o.attachInboundStream(r);this._processMessages(s,a,o)}async _onPeerConnected(e,r){let n=e.toB58String();this.log("connected",n);try{let{stream:i,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(i)}catch(i){this.log.err(i)}this._sendSubscriptions(n,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let n=e.toB58String();this.log("connection ended",n,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let n=e.toB58String(),i=this.peers.get(n);if(i)return i;this.log("new peer",n);let s=new Wb({id:e,protocol:r});return this.peers.set(n,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),n=this.peers.get(r);if(!!n){n.removeAllListeners(),n.close(),this.log("delete peer",r),this.peers.delete(r);for(let i of this.topics.values())i.delete(r);return n}}async _processMessages(e,r,n){try{await Hb(r,async i=>{for await(let s of i){let o=s instanceof Uint8Array?s:s.slice(),a=this._decodeRpc(o);(async()=>{try{await this._processRpc(e,n,a)}catch(u){this.log.err(u)}})()}})}catch(i){this._onPeerDisconnected(n.id,i)}}async _processRpc(e,r,n){this.log("rpc from",e);let i=n.subscriptions,s=n.msgs;return i.length&&(i.forEach(o=>{this._processRpcSubOpt(e,o)}),this.emit("pubsub:subscription-change",r.id,i)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(o=>async()=>{if(!(this.canRelayMessage||o.topicIDs&&o.topicIDs.some(a=>this.subscriptions.has(a)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let a=sr.normalizeInRpcMessage(o,e);await this._processRpcMessage(a)}catch(a){this.log.err(a)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let n=r.topicID;if(!n)return;let i=this.topics.get(n);i||(i=new Set,this.topics.set(n,i)),r.subscribe?i.add(e):i.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(sr.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case Kt.StrictSign:return sr.msgId(e.from,e.seqno);case Kt.StrictNoSign:return sr.noSignMsgId(e.data);default:throw Ue(new Error("Cannot get message id: unhandled signature policy: "+r),st.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return Kp.decode(e)}_encodeRpc(e){return Kp.encode(e).finish()}_sendRpc(e,r){let n=this.peers.get(e);if(!n||!n.isWritable){let i=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(i);return}n.write(this._encodeRpc(r))}_sendSubscriptions(e,r,n){return this._sendRpc(e,{subscriptions:r.map(i=>({topicID:i,subscribe:n}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case Kt.StrictNoSign:if(e.from)throw Ue(new Error("StrictNoSigning: from should not be present"),st.ERR_UNEXPECTED_FROM);if(e.signature)throw Ue(new Error("StrictNoSigning: signature should not be present"),st.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw Ue(new Error("StrictNoSigning: key should not be present"),st.ERR_UNEXPECTED_KEY);if(e.seqno)throw Ue(new Error("StrictNoSigning: seqno should not be present"),st.ERR_UNEXPECTED_SEQNO);break;case Kt.StrictSign:if(!e.signature)throw Ue(new Error("StrictSigning: Signing required and no signature was present"),st.ERR_MISSING_SIGNATURE);if(!e.seqno)throw Ue(new Error("StrictSigning: Signing required and no seqno was present"),st.ERR_MISSING_SEQNO);if(!await Yb(e))throw Ue(new Error("StrictSigning: Invalid message signature"),st.ERR_INVALID_SIGNATURE);break;default:throw Ue(new Error("Cannot validate message: unhandled signature policy: "+r),st.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let n of e.topicIDs){let i=this.topicValidators.get(n);i&&await i(n,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case Kt.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=sr.randomSeqno(),$b(this.peerId,e);case Kt.StrictNoSign:return Promise.resolve(e);default:throw Ue(new Error("Cannot build message: unhandled signature policy: "+r),st.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw Ue(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw Ue(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let i={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(i),o=sr.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(e){throw Ue(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,n)=>this._sendSubscriptions(n,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,n)=>this._sendSubscriptions(n,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};as.utils=sr;as.SignaturePolicy=Kt;Fp.exports=as});var Mp=E((JE,qp)=>{"use strict";var Up=vn(),Qb=Object.assign(Up("libp2p:floodsub"),{error:Up("libp2p:floodsub:err")});qp.exports={log:Qb,multicodec:"/floodsub/1.0.0"}});var rm=E((e8,pa)=>{"use strict";var Zb="libp2p:floodsub",Xb=Sa(),{toString:Jb}=(ct(),ut),em=la(),{utils:tm}=la(),{multicodec:Vp}=Mp(),zp=class extends em{constructor(e,r={}){super({debugName:Zb,multicodecs:Vp,libp2p:e,canRelayMessage:!0,...r});this.seenCache=new Xb}async _processRpcMessage(e){let r=await this.getMsgId(e),n=Jb(r,"base64");this.seenCache.has(n)||(this.seenCache.put(n),await super._processRpcMessage(e))}_publish(e){return this._forwardMessage(e),Promise.resolve()}_forwardMessage(e){e.topicIDs.forEach(r=>{let n=this.topics.get(r);!n||n.forEach(i=>{this.log("publish msgs on topics",e.topicIDs,i),i!==this.peerId.toB58String()&&i!==e.receivedFrom&&this._sendRpc(i,{msgs:[tm.normalizeOutRpcMessage(e)]})})})}};pa.exports=zp;pa.exports.multicodec=Vp});return rm();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return Libp2pFloodsub}));
